{"version":3,"file":"52299b76d4276d3dfcbb0e1aadd5415fc1c5a7d9-c7bc1dbafe69add996b5.js","mappings":"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","sources":["webpack://www/./node_modules/@mui/material/Container/containerClasses.js","webpack://www/./node_modules/@mui/material/Container/Container.js","webpack://www/./node_modules/@mui/material/Typography/typographyClasses.js","webpack://www/./node_modules/@mui/material/Typography/Typography.js","webpack://www/./node_modules/fflate/esm/browser.js","webpack://www/./node_modules/three/examples/jsm/loaders/RGBELoader.js","webpack://www/./src/pages/everything.tsx","webpack://www/./node_modules/@mui/system/esm/createBox.js","webpack://www/./node_modules/@mui/material/Box/Box.js","webpack://www/./node_modules/@mui/material/Link/linkClasses.js","webpack://www/./node_modules/@mui/material/Link/Link.js","webpack://www/./src/pages/header.tsx","webpack://www/./src/pages/pmrem-debug.tsx","webpack://www/./src/pmrem.ts","webpack://www/./src/pages/three-debug.tsx","webpack://www/./node_modules/pmrem-cubemap-generator/dist/PMREMCubeMapGenerator.js","webpack://www/./src/pmrem-cubemap.ts"],"sourcesContent":["import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getContainerUtilityClass(slot) {\n  return generateUtilityClass('MuiContainer', slot);\n}\nvar containerClasses = generateUtilityClasses('MuiContainer', ['root', 'disableGutters', 'fixed', 'maxWidthXs', 'maxWidthSm', 'maxWidthMd', 'maxWidthLg', 'maxWidthXl']);\nexport default containerClasses;","import _defineProperty from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"component\", \"disableGutters\", \"fixed\", \"maxWidth\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport { getContainerUtilityClass } from './containerClasses';\nimport capitalize from '../utils/capitalize';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      fixed = ownerState.fixed,\n      disableGutters = ownerState.disableGutters,\n      maxWidth = ownerState.maxWidth;\n  var slots = {\n    root: ['root', maxWidth && \"maxWidth\".concat(capitalize(String(maxWidth))), fixed && 'fixed', disableGutters && 'disableGutters']\n  };\n  return composeClasses(slots, getContainerUtilityClass, classes);\n};\n\nvar ContainerRoot = styled('div', {\n  name: 'MuiContainer',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, styles[\"maxWidth\".concat(capitalize(String(ownerState.maxWidth)))], ownerState.fixed && styles.fixed, ownerState.disableGutters && styles.disableGutters];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    width: '100%',\n    marginLeft: 'auto',\n    boxSizing: 'border-box',\n    marginRight: 'auto',\n    display: 'block'\n  }, !ownerState.disableGutters && _defineProperty({\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  }, theme.breakpoints.up('sm'), {\n    paddingLeft: theme.spacing(3),\n    paddingRight: theme.spacing(3)\n  }));\n}, function (_ref3) {\n  var theme = _ref3.theme,\n      ownerState = _ref3.ownerState;\n  return ownerState.fixed && Object.keys(theme.breakpoints.values).reduce(function (acc, breakpoint) {\n    var value = theme.breakpoints.values[breakpoint];\n\n    if (value !== 0) {\n      acc[theme.breakpoints.up(breakpoint)] = {\n        maxWidth: \"\".concat(value).concat(theme.breakpoints.unit)\n      };\n    }\n\n    return acc;\n  }, {});\n}, function (_ref4) {\n  var theme = _ref4.theme,\n      ownerState = _ref4.ownerState;\n  return _extends({}, ownerState.maxWidth === 'xs' && _defineProperty({}, theme.breakpoints.up('xs'), {\n    maxWidth: Math.max(theme.breakpoints.values.xs, 444)\n  }), ownerState.maxWidth && ownerState.maxWidth !== 'xs' && _defineProperty({}, theme.breakpoints.up(ownerState.maxWidth), {\n    maxWidth: \"\".concat(theme.breakpoints.values[ownerState.maxWidth]).concat(theme.breakpoints.unit)\n  }));\n});\nvar Container = /*#__PURE__*/React.forwardRef(function Container(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiContainer'\n  });\n\n  var className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      _props$fixed = props.fixed,\n      fixed = _props$fixed === void 0 ? false : _props$fixed,\n      _props$maxWidth = props.maxWidth,\n      maxWidth = _props$maxWidth === void 0 ? 'lg' : _props$maxWidth,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    component: component,\n    disableGutters: disableGutters,\n    fixed: fixed,\n    maxWidth: maxWidth\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(ContainerRoot, _extends({\n    as: component,\n    ownerState: ownerState,\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Container;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTypographyUtilityClass(slot) {\n  return generateUtilityClass('MuiTypography', slot);\n}\nvar typographyClasses = generateUtilityClasses('MuiTypography', ['root', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'subtitle1', 'subtitle2', 'body1', 'body2', 'inherit', 'button', 'caption', 'overline', 'alignLeft', 'alignRight', 'alignCenter', 'alignJustify', 'noWrap', 'gutterBottom', 'paragraph']);\nexport default typographyClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"align\", \"className\", \"component\", \"gutterBottom\", \"noWrap\", \"paragraph\", \"variant\", \"variantMapping\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_extendSxProp as extendSxProp } from '@mui/system';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport capitalize from '../utils/capitalize';\nimport { getTypographyUtilityClass } from './typographyClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var align = ownerState.align,\n      gutterBottom = ownerState.gutterBottom,\n      noWrap = ownerState.noWrap,\n      paragraph = ownerState.paragraph,\n      variant = ownerState.variant,\n      classes = ownerState.classes;\n  var slots = {\n    root: ['root', variant, ownerState.align !== 'inherit' && \"align\".concat(capitalize(align)), gutterBottom && 'gutterBottom', noWrap && 'noWrap', paragraph && 'paragraph']\n  };\n  return composeClasses(slots, getTypographyUtilityClass, classes);\n};\n\nexport var TypographyRoot = styled('span', {\n  name: 'MuiTypography',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.variant && styles[ownerState.variant], ownerState.align !== 'inherit' && styles[\"align\".concat(capitalize(ownerState.align))], ownerState.noWrap && styles.noWrap, ownerState.gutterBottom && styles.gutterBottom, ownerState.paragraph && styles.paragraph];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    margin: 0\n  }, ownerState.variant && theme.typography[ownerState.variant], ownerState.align !== 'inherit' && {\n    textAlign: ownerState.align\n  }, ownerState.noWrap && {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }, ownerState.gutterBottom && {\n    marginBottom: '0.35em'\n  }, ownerState.paragraph && {\n    marginBottom: 16\n  });\n});\nvar defaultVariantMapping = {\n  h1: 'h1',\n  h2: 'h2',\n  h3: 'h3',\n  h4: 'h4',\n  h5: 'h5',\n  h6: 'h6',\n  subtitle1: 'h6',\n  subtitle2: 'h6',\n  body1: 'p',\n  body2: 'p',\n  inherit: 'p'\n}; // TODO v6: deprecate these color values in v5.x and remove the transformation in v6\n\nvar colorTransformations = {\n  primary: 'primary.main',\n  textPrimary: 'text.primary',\n  secondary: 'secondary.main',\n  textSecondary: 'text.secondary',\n  error: 'error.main'\n};\n\nvar transformDeprecatedColors = function transformDeprecatedColors(color) {\n  return colorTransformations[color] || color;\n};\n\nvar Typography = /*#__PURE__*/React.forwardRef(function Typography(inProps, ref) {\n  var themeProps = useThemeProps({\n    props: inProps,\n    name: 'MuiTypography'\n  });\n  var color = transformDeprecatedColors(themeProps.color);\n  var props = extendSxProp(_extends({}, themeProps, {\n    color: color\n  }));\n\n  var _props$align = props.align,\n      align = _props$align === void 0 ? 'inherit' : _props$align,\n      className = props.className,\n      component = props.component,\n      _props$gutterBottom = props.gutterBottom,\n      gutterBottom = _props$gutterBottom === void 0 ? false : _props$gutterBottom,\n      _props$noWrap = props.noWrap,\n      noWrap = _props$noWrap === void 0 ? false : _props$noWrap,\n      _props$paragraph = props.paragraph,\n      paragraph = _props$paragraph === void 0 ? false : _props$paragraph,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'body1' : _props$variant,\n      _props$variantMapping = props.variantMapping,\n      variantMapping = _props$variantMapping === void 0 ? defaultVariantMapping : _props$variantMapping,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    align: align,\n    color: color,\n    className: className,\n    component: component,\n    gutterBottom: gutterBottom,\n    noWrap: noWrap,\n    paragraph: paragraph,\n    variant: variant,\n    variantMapping: variantMapping\n  });\n\n  var Component = component || (paragraph ? 'p' : variantMapping[variant] || defaultVariantMapping[variant]) || 'span';\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(TypographyRoot, _extends({\n    as: Component,\n    ref: ref,\n    ownerState: ownerState,\n    className: clsx(classes.root, className)\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Typography;","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\n\nvar wk = function wk(c, id, msg, transfer, cb) {\n  var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'], {\n    type: 'text/javascript'\n  }))));\n\n  w.onmessage = function (e) {\n    var d = e.data,\n        ed = d.$e$;\n\n    if (ed) {\n      var err = new Error(ed[0]);\n      err['code'] = ed[1];\n      err.stack = ed[2];\n      cb(err, null);\n    } else cb(null, d);\n  };\n\n  w.postMessage(msg, transfer);\n  return w;\n}; // aliases for shorter compressed code (most minifers don't do this)\n\n\nvar u8 = Uint8Array,\n    u16 = Uint16Array,\n    u32 = Uint32Array; // fixed length extra bits\n\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0,\n/* unused */\n0, 0,\n/* impossible */\n0]); // fixed distance extra bits\n// see fleb note\n\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13,\n/* unused */\n0, 0]); // code length index map\n\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]); // get base, reverse index map from extra bits\n\nvar freb = function freb(eb, start) {\n  var b = new u16(31);\n\n  for (var i = 0; i < 31; ++i) {\n    b[i] = start += 1 << eb[i - 1];\n  } // numbers here are at max 18 bits\n\n\n  var r = new u32(b[30]);\n\n  for (var i = 1; i < 30; ++i) {\n    for (var j = b[i]; j < b[i + 1]; ++j) {\n      r[j] = j - b[i] << 5 | i;\n    }\n  }\n\n  return [b, r];\n};\n\nvar _a = freb(fleb, 2),\n    fl = _a[0],\n    revfl = _a[1]; // we can ignore the fact that the other numbers are wrong; they never happen anyway\n\n\nfl[28] = 258, revfl[258] = 28;\n\nvar _b = freb(fdeb, 0),\n    fd = _b[0],\n    revfd = _b[1]; // map of value to reverse (assuming 16 bits)\n\n\nvar rev = new u16(32768);\n\nfor (var i = 0; i < 32768; ++i) {\n  // reverse table algorithm from SO\n  var x = (i & 0xAAAA) >>> 1 | (i & 0x5555) << 1;\n  x = (x & 0xCCCC) >>> 2 | (x & 0x3333) << 2;\n  x = (x & 0xF0F0) >>> 4 | (x & 0x0F0F) << 4;\n  rev[i] = ((x & 0xFF00) >>> 8 | (x & 0x00FF) << 8) >>> 1;\n} // create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\n\n\nvar hMap = function hMap(cd, mb, r) {\n  var s = cd.length; // index\n\n  var i = 0; // u16 \"map\": index -> # of codes with bit length = index\n\n  var l = new u16(mb); // length of cd must be 288 (total # of codes)\n\n  for (; i < s; ++i) {\n    if (cd[i]) ++l[cd[i] - 1];\n  } // u16 \"map\": index -> minimum code for bit length = index\n\n\n  var le = new u16(mb);\n\n  for (i = 0; i < mb; ++i) {\n    le[i] = le[i - 1] + l[i - 1] << 1;\n  }\n\n  var co;\n\n  if (r) {\n    // u16 \"map\": index -> number of actual bits, symbol for code\n    co = new u16(1 << mb); // bits to remove for reverser\n\n    var rvb = 15 - mb;\n\n    for (i = 0; i < s; ++i) {\n      // ignore 0 lengths\n      if (cd[i]) {\n        // num encoding both symbol and bits read\n        var sv = i << 4 | cd[i]; // free bits\n\n        var r_1 = mb - cd[i]; // start value\n\n        var v = le[cd[i] - 1]++ << r_1; // m is end value\n\n        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n          // every 16 bit value starting with the code yields the same result\n          co[rev[v] >>> rvb] = sv;\n        }\n      }\n    }\n  } else {\n    co = new u16(s);\n\n    for (i = 0; i < s; ++i) {\n      if (cd[i]) {\n        co[i] = rev[le[cd[i] - 1]++] >>> 15 - cd[i];\n      }\n    }\n  }\n\n  return co;\n}; // fixed length tree\n\n\nvar flt = new u8(288);\n\nfor (var i = 0; i < 144; ++i) {\n  flt[i] = 8;\n}\n\nfor (var i = 144; i < 256; ++i) {\n  flt[i] = 9;\n}\n\nfor (var i = 256; i < 280; ++i) {\n  flt[i] = 7;\n}\n\nfor (var i = 280; i < 288; ++i) {\n  flt[i] = 8;\n} // fixed distance tree\n\n\nvar fdt = new u8(32);\n\nfor (var i = 0; i < 32; ++i) {\n  fdt[i] = 5;\n} // fixed length map\n\n\nvar flm = /*#__PURE__*/hMap(flt, 9, 0),\n    flrm = /*#__PURE__*/hMap(flt, 9, 1); // fixed distance map\n\nvar fdm = /*#__PURE__*/hMap(fdt, 5, 0),\n    fdrm = /*#__PURE__*/hMap(fdt, 5, 1); // find max of array\n\nvar max = function max(a) {\n  var m = a[0];\n\n  for (var i = 1; i < a.length; ++i) {\n    if (a[i] > m) m = a[i];\n  }\n\n  return m;\n}; // read d, starting at bit p and mask with m\n\n\nvar bits = function bits(d, p, m) {\n  var o = p / 8 | 0;\n  return (d[o] | d[o + 1] << 8) >> (p & 7) & m;\n}; // read d, starting at bit p continuing for at least 16 bits\n\n\nvar bits16 = function bits16(d, p) {\n  var o = p / 8 | 0;\n  return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >> (p & 7);\n}; // get end of byte\n\n\nvar shft = function shft(p) {\n  return (p + 7) / 8 | 0;\n}; // typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\n\n\nvar slc = function slc(v, s, e) {\n  if (s == null || s < 0) s = 0;\n  if (e == null || e > v.length) e = v.length; // can't use .constructor in case user-supplied\n\n  var n = new (v.BYTES_PER_ELEMENT == 2 ? u16 : v.BYTES_PER_ELEMENT == 4 ? u32 : u8)(e - s);\n  n.set(v.subarray(s, e));\n  return n;\n};\n/**\n * Codes for errors generated within this library\n */\n\n\nexport var FlateErrorCode = {\n  UnexpectedEOF: 0,\n  InvalidBlockType: 1,\n  InvalidLengthLiteral: 2,\n  InvalidDistance: 3,\n  StreamFinished: 4,\n  NoStreamHandler: 5,\n  InvalidHeader: 6,\n  NoCallback: 7,\n  InvalidUTF8: 8,\n  ExtraFieldTooLong: 9,\n  InvalidDate: 10,\n  FilenameTooLong: 11,\n  StreamFinishing: 12,\n  InvalidZipData: 13,\n  UnknownCompressionMethod: 14\n}; // error codes\n\nvar ec = ['unexpected EOF', 'invalid block type', 'invalid length/literal', 'invalid distance', 'stream finished', 'no stream handler',, 'no callback', 'invalid UTF-8 data', 'extra field too long', 'date not in range 1980-2099', 'filename too long', 'stream finishing', 'invalid zip data' // determined by unknown compression method\n];\n;\n\nvar err = function err(ind, msg, nt) {\n  var e = new Error(msg || ec[ind]);\n  e.code = ind;\n  if (Error.captureStackTrace) Error.captureStackTrace(e, err);\n  if (!nt) throw e;\n  return e;\n}; // expands raw DEFLATE data\n\n\nvar inflt = function inflt(dat, buf, st) {\n  // source length\n  var sl = dat.length;\n  if (!sl || st && st.f && !st.l) return buf || new u8(0); // have to estimate size\n\n  var noBuf = !buf || st; // no state\n\n  var noSt = !st || st.i;\n  if (!st) st = {}; // Assumes roughly 33% compression ratio average\n\n  if (!buf) buf = new u8(sl * 3); // ensure buffer can fit at least l elements\n\n  var cbuf = function cbuf(l) {\n    var bl = buf.length; // need to increase size to fit\n\n    if (l > bl) {\n      // Double or set to necessary, whichever is greater\n      var nbuf = new u8(Math.max(bl * 2, l));\n      nbuf.set(buf);\n      buf = nbuf;\n    }\n  }; //  last chunk         bitpos           bytes\n\n\n  var final = st.f || 0,\n      pos = st.p || 0,\n      bt = st.b || 0,\n      lm = st.l,\n      dm = st.d,\n      lbt = st.m,\n      dbt = st.n; // total bits\n\n  var tbts = sl * 8;\n\n  do {\n    if (!lm) {\n      // BFINAL - this is only 1 when last chunk is next\n      final = bits(dat, pos, 1); // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n\n      var type = bits(dat, pos + 1, 3);\n      pos += 3;\n\n      if (!type) {\n        // go to end of byte boundary\n        var s = shft(pos) + 4,\n            l = dat[s - 4] | dat[s - 3] << 8,\n            t = s + l;\n\n        if (t > sl) {\n          if (noSt) err(0);\n          break;\n        } // ensure size\n\n\n        if (noBuf) cbuf(bt + l); // Copy over uncompressed data\n\n        buf.set(dat.subarray(s, t), bt); // Get new bitpos, update byte count\n\n        st.b = bt += l, st.p = pos = t * 8, st.f = final;\n        continue;\n      } else if (type == 1) lm = flrm, dm = fdrm, lbt = 9, dbt = 5;else if (type == 2) {\n        //  literal                            lengths\n        var hLit = bits(dat, pos, 31) + 257,\n            hcLen = bits(dat, pos + 10, 15) + 4;\n        var tl = hLit + bits(dat, pos + 5, 31) + 1;\n        pos += 14; // length+distance tree\n\n        var ldt = new u8(tl); // code length tree\n\n        var clt = new u8(19);\n\n        for (var i = 0; i < hcLen; ++i) {\n          // use index map to get real code\n          clt[clim[i]] = bits(dat, pos + i * 3, 7);\n        }\n\n        pos += hcLen * 3; // code lengths bits\n\n        var clb = max(clt),\n            clbmsk = (1 << clb) - 1; // code lengths map\n\n        var clm = hMap(clt, clb, 1);\n\n        for (var i = 0; i < tl;) {\n          var r = clm[bits(dat, pos, clbmsk)]; // bits read\n\n          pos += r & 15; // symbol\n\n          var s = r >>> 4; // code length to copy\n\n          if (s < 16) {\n            ldt[i++] = s;\n          } else {\n            //  copy   count\n            var c = 0,\n                n = 0;\n            if (s == 16) n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];else if (s == 17) n = 3 + bits(dat, pos, 7), pos += 3;else if (s == 18) n = 11 + bits(dat, pos, 127), pos += 7;\n\n            while (n--) {\n              ldt[i++] = c;\n            }\n          }\n        } //    length tree                 distance tree\n\n\n        var lt = ldt.subarray(0, hLit),\n            dt = ldt.subarray(hLit); // max length bits\n\n        lbt = max(lt); // max dist bits\n\n        dbt = max(dt);\n        lm = hMap(lt, lbt, 1);\n        dm = hMap(dt, dbt, 1);\n      } else err(1);\n\n      if (pos > tbts) {\n        if (noSt) err(0);\n        break;\n      }\n    } // Make sure the buffer can hold this + the largest possible addition\n    // Maximum chunk size (practically, theoretically infinite) is 2^17;\n\n\n    if (noBuf) cbuf(bt + 131072);\n    var lms = (1 << lbt) - 1,\n        dms = (1 << dbt) - 1;\n    var lpos = pos;\n\n    for (;; lpos = pos) {\n      // bits read, code\n      var c = lm[bits16(dat, pos) & lms],\n          sym = c >>> 4;\n      pos += c & 15;\n\n      if (pos > tbts) {\n        if (noSt) err(0);\n        break;\n      }\n\n      if (!c) err(2);\n      if (sym < 256) buf[bt++] = sym;else if (sym == 256) {\n        lpos = pos, lm = null;\n        break;\n      } else {\n        var add = sym - 254; // no extra bits needed if less\n\n        if (sym > 264) {\n          // index\n          var i = sym - 257,\n              b = fleb[i];\n          add = bits(dat, pos, (1 << b) - 1) + fl[i];\n          pos += b;\n        } // dist\n\n\n        var d = dm[bits16(dat, pos) & dms],\n            dsym = d >>> 4;\n        if (!d) err(3);\n        pos += d & 15;\n        var dt = fd[dsym];\n\n        if (dsym > 3) {\n          var b = fdeb[dsym];\n          dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n        }\n\n        if (pos > tbts) {\n          if (noSt) err(0);\n          break;\n        }\n\n        if (noBuf) cbuf(bt + 131072);\n        var end = bt + add;\n\n        for (; bt < end; bt += 4) {\n          buf[bt] = buf[bt - dt];\n          buf[bt + 1] = buf[bt + 1 - dt];\n          buf[bt + 2] = buf[bt + 2 - dt];\n          buf[bt + 3] = buf[bt + 3 - dt];\n        }\n\n        bt = end;\n      }\n    }\n\n    st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n    if (lm) final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n  } while (!final);\n\n  return bt == buf.length ? buf : slc(buf, 0, bt);\n}; // starting at p, write the minimum number of bits that can hold v to d\n\n\nvar wbits = function wbits(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 | 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n}; // starting at p, write the minimum number of bits (>8) that can hold v to d\n\n\nvar wbits16 = function wbits16(d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 | 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n  d[o + 2] |= v >>> 16;\n}; // creates code lengths from a frequency table\n\n\nvar hTree = function hTree(d, mb) {\n  // Need extra info to make a tree\n  var t = [];\n\n  for (var i = 0; i < d.length; ++i) {\n    if (d[i]) t.push({\n      s: i,\n      f: d[i]\n    });\n  }\n\n  var s = t.length;\n  var t2 = t.slice();\n  if (!s) return [et, 0];\n\n  if (s == 1) {\n    var v = new u8(t[0].s + 1);\n    v[t[0].s] = 1;\n    return [v, 1];\n  }\n\n  t.sort(function (a, b) {\n    return a.f - b.f;\n  }); // after i2 reaches last ind, will be stopped\n  // freq must be greater than largest possible number of symbols\n\n  t.push({\n    s: -1,\n    f: 25001\n  });\n  var l = t[0],\n      r = t[1],\n      i0 = 0,\n      i1 = 1,\n      i2 = 2;\n  t[0] = {\n    s: -1,\n    f: l.f + r.f,\n    l: l,\n    r: r\n  }; // efficient algorithm from UZIP.js\n  // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n  // symbols that combined have high freq, will start processing i2 (high-freq,\n  // non-composite) symbols instead\n  // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n\n  while (i1 != s - 1) {\n    l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n    r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n    t[i1++] = {\n      s: -1,\n      f: l.f + r.f,\n      l: l,\n      r: r\n    };\n  }\n\n  var maxSym = t2[0].s;\n\n  for (var i = 1; i < s; ++i) {\n    if (t2[i].s > maxSym) maxSym = t2[i].s;\n  } // code lengths\n\n\n  var tr = new u16(maxSym + 1); // max bits in tree\n\n  var mbt = ln(t[i1 - 1], tr, 0);\n\n  if (mbt > mb) {\n    // more algorithms from UZIP.js\n    // TODO: find out how this code works (debt)\n    //  ind    debt\n    var i = 0,\n        dt = 0; //    left            cost\n\n    var lft = mbt - mb,\n        cst = 1 << lft;\n    t2.sort(function (a, b) {\n      return tr[b.s] - tr[a.s] || a.f - b.f;\n    });\n\n    for (; i < s; ++i) {\n      var i2_1 = t2[i].s;\n\n      if (tr[i2_1] > mb) {\n        dt += cst - (1 << mbt - tr[i2_1]);\n        tr[i2_1] = mb;\n      } else break;\n    }\n\n    dt >>>= lft;\n\n    while (dt > 0) {\n      var i2_2 = t2[i].s;\n      if (tr[i2_2] < mb) dt -= 1 << mb - tr[i2_2]++ - 1;else ++i;\n    }\n\n    for (; i >= 0 && dt; --i) {\n      var i2_3 = t2[i].s;\n\n      if (tr[i2_3] == mb) {\n        --tr[i2_3];\n        ++dt;\n      }\n    }\n\n    mbt = mb;\n  }\n\n  return [new u8(tr), mbt];\n}; // get the max length and assign length codes\n\n\nvar ln = function ln(n, l, d) {\n  return n.s == -1 ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1)) : l[n.s] = d;\n}; // length codes generation\n\n\nvar lc = function lc(c) {\n  var s = c.length; // Note that the semicolon was intentional\n\n  while (s && !c[--s]) {\n    ;\n  }\n\n  var cl = new u16(++s); //  ind      num         streak\n\n  var cli = 0,\n      cln = c[0],\n      cls = 1;\n\n  var w = function w(v) {\n    cl[cli++] = v;\n  };\n\n  for (var i = 1; i <= s; ++i) {\n    if (c[i] == cln && i != s) ++cls;else {\n      if (!cln && cls > 2) {\n        for (; cls > 138; cls -= 138) {\n          w(32754);\n        }\n\n        if (cls > 2) {\n          w(cls > 10 ? cls - 11 << 5 | 28690 : cls - 3 << 5 | 12305);\n          cls = 0;\n        }\n      } else if (cls > 3) {\n        w(cln), --cls;\n\n        for (; cls > 6; cls -= 6) {\n          w(8304);\n        }\n\n        if (cls > 2) w(cls - 3 << 5 | 8208), cls = 0;\n      }\n\n      while (cls--) {\n        w(cln);\n      }\n\n      cls = 1;\n      cln = c[i];\n    }\n  }\n\n  return [cl.subarray(0, cli), s];\n}; // calculate the length of output from tree, code lengths\n\n\nvar clen = function clen(cf, cl) {\n  var l = 0;\n\n  for (var i = 0; i < cl.length; ++i) {\n    l += cf[i] * cl[i];\n  }\n\n  return l;\n}; // writes a fixed block\n// returns the new bit pos\n\n\nvar wfblk = function wfblk(out, pos, dat) {\n  // no need to write 00 as type: TypedArray defaults to 0\n  var s = dat.length;\n  var o = shft(pos + 2);\n  out[o] = s & 255;\n  out[o + 1] = s >>> 8;\n  out[o + 2] = out[o] ^ 255;\n  out[o + 3] = out[o + 1] ^ 255;\n\n  for (var i = 0; i < s; ++i) {\n    out[o + i + 4] = dat[i];\n  }\n\n  return (o + 4 + s) * 8;\n}; // writes a block\n\n\nvar wblk = function wblk(dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n  wbits(out, p++, final);\n  ++lf[256];\n\n  var _a = hTree(lf, 15),\n      dlt = _a[0],\n      mlb = _a[1];\n\n  var _b = hTree(df, 15),\n      ddt = _b[0],\n      mdb = _b[1];\n\n  var _c = lc(dlt),\n      lclt = _c[0],\n      nlc = _c[1];\n\n  var _d = lc(ddt),\n      lcdt = _d[0],\n      ndc = _d[1];\n\n  var lcfreq = new u16(19);\n\n  for (var i = 0; i < lclt.length; ++i) {\n    lcfreq[lclt[i] & 31]++;\n  }\n\n  for (var i = 0; i < lcdt.length; ++i) {\n    lcfreq[lcdt[i] & 31]++;\n  }\n\n  var _e = hTree(lcfreq, 7),\n      lct = _e[0],\n      mlcb = _e[1];\n\n  var nlcc = 19;\n\n  for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc) {\n    ;\n  }\n\n  var flen = bl + 5 << 3;\n  var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n  var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n  if (flen <= ftlen && flen <= dtlen) return wfblk(out, p, dat.subarray(bs, bs + bl));\n  var lm, ll, dm, dl;\n  wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n\n  if (dtlen < ftlen) {\n    lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n    var llm = hMap(lct, mlcb, 0);\n    wbits(out, p, nlc - 257);\n    wbits(out, p + 5, ndc - 1);\n    wbits(out, p + 10, nlcc - 4);\n    p += 14;\n\n    for (var i = 0; i < nlcc; ++i) {\n      wbits(out, p + 3 * i, lct[clim[i]]);\n    }\n\n    p += 3 * nlcc;\n    var lcts = [lclt, lcdt];\n\n    for (var it = 0; it < 2; ++it) {\n      var clct = lcts[it];\n\n      for (var i = 0; i < clct.length; ++i) {\n        var len = clct[i] & 31;\n        wbits(out, p, llm[len]), p += lct[len];\n        if (len > 15) wbits(out, p, clct[i] >>> 5 & 127), p += clct[i] >>> 12;\n      }\n    }\n  } else {\n    lm = flm, ll = flt, dm = fdm, dl = fdt;\n  }\n\n  for (var i = 0; i < li; ++i) {\n    if (syms[i] > 255) {\n      var len = syms[i] >>> 18 & 31;\n      wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n      if (len > 7) wbits(out, p, syms[i] >>> 23 & 31), p += fleb[len];\n      var dst = syms[i] & 31;\n      wbits16(out, p, dm[dst]), p += dl[dst];\n      if (dst > 3) wbits16(out, p, syms[i] >>> 5 & 8191), p += fdeb[dst];\n    } else {\n      wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n    }\n  }\n\n  wbits16(out, p, lm[256]);\n  return p + ll[256];\n}; // deflate options (nice << 13) | chain\n\n\nvar deo = /*#__PURE__*/new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]); // empty\n\nvar et = /*#__PURE__*/new u8(0); // compresses data into a raw DEFLATE buffer\n\nvar dflt = function dflt(dat, lvl, plvl, pre, post, lst) {\n  var s = dat.length;\n  var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post); // writing to this writes to the output buffer\n\n  var w = o.subarray(pre, o.length - post);\n  var pos = 0;\n\n  if (!lvl || s < 8) {\n    for (var i = 0; i <= s; i += 65535) {\n      // end\n      var e = i + 65535;\n\n      if (e >= s) {\n        // write final block\n        w[pos >> 3] = lst;\n      }\n\n      pos = wfblk(w, pos + 1, dat.subarray(i, e));\n    }\n  } else {\n    var opt = deo[lvl - 1];\n    var n = opt >>> 13,\n        c = opt & 8191;\n    var msk_1 = (1 << plvl) - 1; //    prev 2-byte val map    curr 2-byte val map\n\n    var prev = new u16(32768),\n        head = new u16(msk_1 + 1);\n    var bs1_1 = Math.ceil(plvl / 3),\n        bs2_1 = 2 * bs1_1;\n\n    var hsh = function hsh(i) {\n      return (dat[i] ^ dat[i + 1] << bs1_1 ^ dat[i + 2] << bs2_1) & msk_1;\n    }; // 24576 is an arbitrary number of maximum symbols per block\n    // 424 buffer for last block\n\n\n    var syms = new u32(25000); // length/literal freq   distance freq\n\n    var lf = new u16(288),\n        df = new u16(32); //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n\n    var lc_1 = 0,\n        eb = 0,\n        i = 0,\n        li = 0,\n        wi = 0,\n        bs = 0;\n\n    for (; i < s; ++i) {\n      // hash value\n      // deopt when i > s - 3 - at end, deopt acceptable\n      var hv = hsh(i); // index mod 32768    previous index mod\n\n      var imod = i & 32767,\n          pimod = head[hv];\n      prev[imod] = pimod;\n      head[hv] = imod; // We always should modify head and prev, but only add symbols if\n      // this data is not yet processed (\"wait\" for wait index)\n\n      if (wi <= i) {\n        // bytes remaining\n        var rem = s - i;\n\n        if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n          pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n          li = lc_1 = eb = 0, bs = i;\n\n          for (var j = 0; j < 286; ++j) {\n            lf[j] = 0;\n          }\n\n          for (var j = 0; j < 30; ++j) {\n            df[j] = 0;\n          }\n        } //  len    dist   chain\n\n\n        var l = 2,\n            d = 0,\n            ch_1 = c,\n            dif = imod - pimod & 32767;\n\n        if (rem > 2 && hv == hsh(i - dif)) {\n          var maxn = Math.min(n, rem) - 1;\n          var maxd = Math.min(32767, i); // max possible length\n          // not capped at dif because decompressors implement \"rolling\" index population\n\n          var ml = Math.min(258, rem);\n\n          while (dif <= maxd && --ch_1 && imod != pimod) {\n            if (dat[i + l] == dat[i + l - dif]) {\n              var nl = 0;\n\n              for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl) {\n                ;\n              }\n\n              if (nl > l) {\n                l = nl, d = dif; // break out early when we reach \"nice\" (we are satisfied enough)\n\n                if (nl > maxn) break; // now, find the rarest 2-byte sequence within this\n                // length of literals and search for that instead.\n                // Much faster than just using the start\n\n                var mmd = Math.min(dif, nl - 2);\n                var md = 0;\n\n                for (var j = 0; j < mmd; ++j) {\n                  var ti = i - dif + j + 32768 & 32767;\n                  var pti = prev[ti];\n                  var cd = ti - pti + 32768 & 32767;\n                  if (cd > md) md = cd, pimod = ti;\n                }\n              }\n            } // check the previous match\n\n\n            imod = pimod, pimod = prev[imod];\n            dif += imod - pimod + 32768 & 32767;\n          }\n        } // d will be nonzero only when a match was found\n\n\n        if (d) {\n          // store both dist and len data in one Uint32\n          // Make sure this is recognized as a len/dist with 28th bit (2^28)\n          syms[li++] = 268435456 | revfl[l] << 18 | revfd[d];\n          var lin = revfl[l] & 31,\n              din = revfd[d] & 31;\n          eb += fleb[lin] + fdeb[din];\n          ++lf[257 + lin];\n          ++df[din];\n          wi = i + l;\n          ++lc_1;\n        } else {\n          syms[li++] = dat[i];\n          ++lf[dat[i]];\n        }\n      }\n    }\n\n    pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos); // this is the easiest way to avoid needing to maintain state\n\n    if (!lst && pos & 7) pos = wfblk(w, pos + 1, et);\n  }\n\n  return slc(o, 0, pre + shft(pos) + post);\n}; // CRC32 table\n\n\nvar crct = /*#__PURE__*/function () {\n  var t = new Int32Array(256);\n\n  for (var i = 0; i < 256; ++i) {\n    var c = i,\n        k = 9;\n\n    while (--k) {\n      c = (c & 1 && -306674912) ^ c >>> 1;\n    }\n\n    t[i] = c;\n  }\n\n  return t;\n}(); // CRC32\n\n\nvar crc = function crc() {\n  var c = -1;\n  return {\n    p: function p(d) {\n      // closures have awful performance\n      var cr = c;\n\n      for (var i = 0; i < d.length; ++i) {\n        cr = crct[cr & 255 ^ d[i]] ^ cr >>> 8;\n      }\n\n      c = cr;\n    },\n    d: function d() {\n      return ~c;\n    }\n  };\n}; // Alder32\n\n\nvar adler = function adler() {\n  var a = 1,\n      b = 0;\n  return {\n    p: function p(d) {\n      // closures have awful performance\n      var n = a,\n          m = b;\n      var l = d.length | 0;\n\n      for (var i = 0; i != l;) {\n        var e = Math.min(i + 2655, l);\n\n        for (; i < e; ++i) {\n          m += n += d[i];\n        }\n\n        n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n      }\n\n      a = n, b = m;\n    },\n    d: function d() {\n      a %= 65521, b %= 65521;\n      return (a & 255) << 24 | a >>> 8 << 16 | (b & 255) << 8 | b >>> 8;\n    }\n  };\n};\n\n; // deflate with opts\n\nvar dopt = function dopt(dat, opt, pre, post, st) {\n  return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 12 + opt.mem, pre, post, !st);\n}; // Walmart object spread\n\n\nvar mrg = function mrg(a, b) {\n  var o = {};\n\n  for (var k in a) {\n    o[k] = a[k];\n  }\n\n  for (var k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}; // worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\n\n\nvar wcln = function wcln(fn, fnStr, td) {\n  var dt = fn();\n  var st = fn.toString();\n  var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n\n  for (var i = 0; i < dt.length; ++i) {\n    var v = dt[i],\n        k = ks[i];\n\n    if (typeof v == 'function') {\n      fnStr += ';' + k + '=';\n      var st_1 = v.toString();\n\n      if (v.prototype) {\n        // for global objects\n        if (st_1.indexOf('[native code]') != -1) {\n          var spInd = st_1.indexOf(' ', 8) + 1;\n          fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n        } else {\n          fnStr += st_1;\n\n          for (var t in v.prototype) {\n            fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n          }\n        }\n      } else fnStr += st_1;\n    } else td[k] = v;\n  }\n\n  return [fnStr, td];\n};\n\nvar ch = []; // clone bufs\n\nvar cbfs = function cbfs(v) {\n  var tl = [];\n\n  for (var k in v) {\n    if (v[k].buffer) {\n      tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n  }\n\n  return tl;\n}; // use a worker to execute code\n\n\nvar wrkr = function wrkr(fns, init, id, cb) {\n  var _a;\n\n  if (!ch[id]) {\n    var fnStr = '',\n        td_1 = {},\n        m = fns.length - 1;\n\n    for (var i = 0; i < m; ++i) {\n      _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n    }\n\n    ch[id] = wcln(fns[m], fnStr, td_1);\n  }\n\n  var td = mrg({}, ch[id][1]);\n  return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n}; // base async inflate fn\n\n\nvar bInflt = function bInflt() {\n  return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gu8];\n};\n\nvar bDflt = function bDflt() {\n  return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf];\n}; // gzip extra\n\n\nvar gze = function gze() {\n  return [gzh, gzhl, wbytes, crc, crct];\n}; // gunzip extra\n\n\nvar guze = function guze() {\n  return [gzs, gzl];\n}; // zlib extra\n\n\nvar zle = function zle() {\n  return [zlh, wbytes, adler];\n}; // unzlib extra\n\n\nvar zule = function zule() {\n  return [zlv];\n}; // post buf\n\n\nvar pbf = function pbf(msg) {\n  return postMessage(msg, [msg.buffer]);\n}; // get u8\n\n\nvar gu8 = function gu8(o) {\n  return o && o.size && new u8(o.size);\n}; // async helper\n\n\nvar cbify = function cbify(dat, opts, fns, init, id, cb) {\n  var w = wrkr(fns, init, id, function (err, dat) {\n    w.terminate();\n    cb(err, dat);\n  });\n  w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n  return function () {\n    w.terminate();\n  };\n}; // auto stream\n\n\nvar astrm = function astrm(strm) {\n  strm.ondata = function (dat, final) {\n    return postMessage([dat, final], [dat.buffer]);\n  };\n\n  return function (ev) {\n    return strm.push(ev.data[0], ev.data[1]);\n  };\n}; // async stream attach\n\n\nvar astrmify = function astrmify(fns, strm, opts, init, id) {\n  var t;\n  var w = wrkr(fns, init, id, function (err, dat) {\n    if (err) w.terminate(), strm.ondata.call(strm, err);else {\n      if (dat[1]) w.terminate();\n      strm.ondata.call(strm, err, dat[0], dat[1]);\n    }\n  });\n  w.postMessage(opts);\n\n  strm.push = function (d, f) {\n    if (!strm.ondata) err(5);\n    if (t) strm.ondata(err(4, 0, 1), null, !!f);\n    w.postMessage([d, t = f], [d.buffer]);\n  };\n\n  strm.terminate = function () {\n    w.terminate();\n  };\n}; // read 2 bytes\n\n\nvar b2 = function b2(d, b) {\n  return d[b] | d[b + 1] << 8;\n}; // read 4 bytes\n\n\nvar b4 = function b4(d, b) {\n  return (d[b] | d[b + 1] << 8 | d[b + 2] << 16 | d[b + 3] << 24) >>> 0;\n};\n\nvar b8 = function b8(d, b) {\n  return b4(d, b) + b4(d, b + 4) * 4294967296;\n}; // write bytes\n\n\nvar wbytes = function wbytes(d, b, v) {\n  for (; v; ++b) {\n    d[b] = v, v >>>= 8;\n  }\n}; // gzip header\n\n\nvar gzh = function gzh(c, o) {\n  var fn = o.filename;\n  c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n\n  if (o.mtime != 0) wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n\n  if (fn) {\n    c[3] = 8;\n\n    for (var i = 0; i <= fn.length; ++i) {\n      c[i + 10] = fn.charCodeAt(i);\n    }\n  }\n}; // gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\n\n\nvar gzs = function gzs(d) {\n  if (d[0] != 31 || d[1] != 139 || d[2] != 8) err(6, 'invalid gzip data');\n  var flg = d[3];\n  var st = 10;\n  if (flg & 4) st += d[10] | (d[11] << 8) + 2;\n\n  for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++]) {\n    ;\n  }\n\n  return st + (flg & 2);\n}; // gzip length\n\n\nvar gzl = function gzl(d) {\n  var l = d.length;\n  return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n}; // gzip header length\n\n\nvar gzhl = function gzhl(o) {\n  return 10 + (o.filename && o.filename.length + 1 || 0);\n}; // zlib header\n\n\nvar zlh = function zlh(c, o) {\n  var lv = o.level,\n      fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n  c[0] = 120, c[1] = fl << 6 | (fl ? 32 - 2 * fl : 1);\n}; // zlib valid\n\n\nvar zlv = function zlv(d) {\n  if ((d[0] & 15) != 8 || d[0] >>> 4 > 7 || (d[0] << 8 | d[1]) % 31) err(6, 'invalid zlib data');\n  if (d[1] & 32) err(6, 'invalid zlib data: preset dictionaries not supported');\n};\n\nfunction AsyncCmpStrm(opts, cb) {\n  if (!cb && typeof opts == 'function') cb = opts, opts = {};\n  this.ondata = cb;\n  return opts;\n} // zlib footer: -4 to -0 is Adler32\n\n/**\n * Streaming DEFLATE compression\n */\n\n\nvar Deflate = /*#__PURE__*/function () {\n  function Deflate(opts, cb) {\n    if (!cb && typeof opts == 'function') cb = opts, opts = {};\n    this.ondata = cb;\n    this.o = opts || {};\n  }\n\n  Deflate.prototype.p = function (c, f) {\n    this.ondata(dopt(c, this.o, 0, 0, !f), f);\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Deflate.prototype.push = function (chunk, final) {\n    if (!this.ondata) err(5);\n    if (this.d) err(4);\n    this.d = final;\n    this.p(chunk, final || false);\n  };\n\n  return Deflate;\n}();\n\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\n\nvar AsyncDeflate = /*#__PURE__*/function () {\n  function AsyncDeflate(opts, cb) {\n    astrmify([bDflt, function () {\n      return [astrm, Deflate];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Deflate(ev.data);\n      onmessage = astrm(strm);\n    }, 6);\n  }\n\n  return AsyncDeflate;\n}();\n\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return cbify(data, opts, [bDflt], function (ev) {\n    return pbf(deflateSync(ev.data[0], ev.data[1]));\n  }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\n\nexport function deflateSync(data, opts) {\n  return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\n\nvar Inflate = /*#__PURE__*/function () {\n  /**\n   * Creates an inflation stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Inflate(cb) {\n    this.s = {};\n    this.p = new u8(0);\n    this.ondata = cb;\n  }\n\n  Inflate.prototype.e = function (c) {\n    if (!this.ondata) err(5);\n    if (this.d) err(4);\n    var l = this.p.length;\n    var n = new u8(l + c.length);\n    n.set(this.p), n.set(c, l), this.p = n;\n  };\n\n  Inflate.prototype.c = function (final) {\n    this.d = this.s.i = final || false;\n    var bts = this.s.b;\n    var dt = inflt(this.p, this.o, this.s);\n    this.ondata(slc(dt, bts, this.s.b), this.d);\n    this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n    this.p = slc(this.p, this.s.p / 8 | 0), this.s.p &= 7;\n  };\n  /**\n   * Pushes a chunk to be inflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the final chunk\n   */\n\n\n  Inflate.prototype.push = function (chunk, final) {\n    this.e(chunk), this.c(final);\n  };\n\n  return Inflate;\n}();\n\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\n\nvar AsyncInflate = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous inflation stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncInflate(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, function () {\n      return [astrm, Inflate];\n    }], this, 0, function () {\n      var strm = new Inflate();\n      onmessage = astrm(strm);\n    }, 7);\n  }\n\n  return AsyncInflate;\n}();\n\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return cbify(data, opts, [bInflt], function (ev) {\n    return pbf(inflateSync(ev.data[0], gu8(ev.data[1])));\n  }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\n\nexport function inflateSync(data, out) {\n  return inflt(data, out);\n} // before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n\n/**\n * Streaming GZIP compression\n */\n\nvar Gzip = /*#__PURE__*/function () {\n  function Gzip(opts, cb) {\n    this.c = crc();\n    this.l = 0;\n    this.v = 1;\n    Deflate.call(this, opts, cb);\n  }\n  /**\n   * Pushes a chunk to be GZIPped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Gzip.prototype.push = function (chunk, final) {\n    Deflate.prototype.push.call(this, chunk, final);\n  };\n\n  Gzip.prototype.p = function (c, f) {\n    this.c.p(c);\n    this.l += c.length;\n    var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n    if (this.v) gzh(raw, this.o), this.v = 0;\n    if (f) wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n    this.ondata(raw, f);\n  };\n\n  return Gzip;\n}();\n\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\n\nvar AsyncGzip = /*#__PURE__*/function () {\n  function AsyncGzip(opts, cb) {\n    astrmify([bDflt, gze, function () {\n      return [astrm, Deflate, Gzip];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Gzip(ev.data);\n      onmessage = astrm(strm);\n    }, 8);\n  }\n\n  return AsyncGzip;\n}();\n\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return cbify(data, opts, [bDflt, gze, function () {\n    return [gzipSync];\n  }], function (ev) {\n    return pbf(gzipSync(ev.data[0], ev.data[1]));\n  }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\n\nexport function gzipSync(data, opts) {\n  if (!opts) opts = {};\n  var c = crc(),\n      l = data.length;\n  c.p(data);\n  var d = dopt(data, opts, gzhl(opts), 8),\n      s = d.length;\n  return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\n\nvar Gunzip = /*#__PURE__*/function () {\n  /**\n   * Creates a GUNZIP stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Gunzip(cb) {\n    this.v = 1;\n    Inflate.call(this, cb);\n  }\n  /**\n   * Pushes a chunk to be GUNZIPped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Gunzip.prototype.push = function (chunk, final) {\n    Inflate.prototype.e.call(this, chunk);\n\n    if (this.v) {\n      var s = this.p.length > 3 ? gzs(this.p) : 4;\n      if (s >= this.p.length && !final) return;\n      this.p = this.p.subarray(s), this.v = 0;\n    }\n\n    if (final) {\n      if (this.p.length < 8) err(6, 'invalid gzip data');\n      this.p = this.p.subarray(0, -8);\n    } // necessary to prevent TS from using the closure value\n    // This allows for workerization to function correctly\n\n\n    Inflate.prototype.c.call(this, final);\n  };\n\n  return Gunzip;\n}();\n\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\n\nvar AsyncGunzip = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous GUNZIP stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncGunzip(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, guze, function () {\n      return [astrm, Inflate, Gunzip];\n    }], this, 0, function () {\n      var strm = new Gunzip();\n      onmessage = astrm(strm);\n    }, 9);\n  }\n\n  return AsyncGunzip;\n}();\n\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return cbify(data, opts, [bInflt, guze, function () {\n    return [gunzipSync];\n  }], function (ev) {\n    return pbf(gunzipSync(ev.data[0]));\n  }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\n\nexport function gunzipSync(data, out) {\n  return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\n\nvar Zlib = /*#__PURE__*/function () {\n  function Zlib(opts, cb) {\n    this.c = adler();\n    this.v = 1;\n    Deflate.call(this, opts, cb);\n  }\n  /**\n   * Pushes a chunk to be zlibbed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Zlib.prototype.push = function (chunk, final) {\n    Deflate.prototype.push.call(this, chunk, final);\n  };\n\n  Zlib.prototype.p = function (c, f) {\n    this.c.p(c);\n    var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n    if (this.v) zlh(raw, this.o), this.v = 0;\n    if (f) wbytes(raw, raw.length - 4, this.c.d());\n    this.ondata(raw, f);\n  };\n\n  return Zlib;\n}();\n\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\n\nvar AsyncZlib = /*#__PURE__*/function () {\n  function AsyncZlib(opts, cb) {\n    astrmify([bDflt, zle, function () {\n      return [astrm, Deflate, Zlib];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Zlib(ev.data);\n      onmessage = astrm(strm);\n    }, 10);\n  }\n\n  return AsyncZlib;\n}();\n\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return cbify(data, opts, [bDflt, zle, function () {\n    return [zlibSync];\n  }], function (ev) {\n    return pbf(zlibSync(ev.data[0], ev.data[1]));\n  }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\n\nexport function zlibSync(data, opts) {\n  if (!opts) opts = {};\n  var a = adler();\n  a.p(data);\n  var d = dopt(data, opts, 2, 4);\n  return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\n\nvar Unzlib = /*#__PURE__*/function () {\n  /**\n   * Creates a Zlib decompression stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Unzlib(cb) {\n    this.v = 1;\n    Inflate.call(this, cb);\n  }\n  /**\n   * Pushes a chunk to be unzlibbed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Unzlib.prototype.push = function (chunk, final) {\n    Inflate.prototype.e.call(this, chunk);\n\n    if (this.v) {\n      if (this.p.length < 2 && !final) return;\n      this.p = this.p.subarray(2), this.v = 0;\n    }\n\n    if (final) {\n      if (this.p.length < 4) err(6, 'invalid zlib data');\n      this.p = this.p.subarray(0, -4);\n    } // necessary to prevent TS from using the closure value\n    // This allows for workerization to function correctly\n\n\n    Inflate.prototype.c.call(this, final);\n  };\n\n  return Unzlib;\n}();\n\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\n\nvar AsyncUnzlib = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous Zlib decompression stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncUnzlib(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, zule, function () {\n      return [astrm, Inflate, Unzlib];\n    }], this, 0, function () {\n      var strm = new Unzlib();\n      onmessage = astrm(strm);\n    }, 11);\n  }\n\n  return AsyncUnzlib;\n}();\n\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return cbify(data, opts, [bInflt, zule, function () {\n    return [unzlibSync];\n  }], function (ev) {\n    return pbf(unzlibSync(ev.data[0], gu8(ev.data[1])));\n  }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\n\nexport function unzlibSync(data, out) {\n  return inflt((zlv(data), data.subarray(2, -4)), out);\n} // Default algorithm for compression (used because having a known output size allows faster decompression)\n\nexport { gzip as compress, AsyncGzip as AsyncCompress }; // Default algorithm for compression (used because having a known output size allows faster decompression)\n\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\n\nvar Decompress = /*#__PURE__*/function () {\n  /**\n   * Creates a decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n  function Decompress(cb) {\n    this.G = Gunzip;\n    this.I = Inflate;\n    this.Z = Unzlib;\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be decompressed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Decompress.prototype.push = function (chunk, final) {\n    if (!this.ondata) err(5);\n\n    if (!this.s) {\n      if (this.p && this.p.length) {\n        var n = new u8(this.p.length + chunk.length);\n        n.set(this.p), n.set(chunk, this.p.length);\n      } else this.p = chunk;\n\n      if (this.p.length > 2) {\n        var _this_1 = this;\n\n        var cb = function cb() {\n          _this_1.ondata.apply(_this_1, arguments);\n        };\n\n        this.s = this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8 ? new this.G(cb) : (this.p[0] & 15) != 8 || this.p[0] >> 4 > 7 || (this.p[0] << 8 | this.p[1]) % 31 ? new this.I(cb) : new this.Z(cb);\n        this.s.push(this.p, final);\n        this.p = null;\n      }\n    } else this.s.push(chunk, final);\n  };\n\n  return Decompress;\n}();\n\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\n\nvar AsyncDecompress = /*#__PURE__*/function () {\n  /**\n  * Creates an asynchronous decompression stream\n  * @param cb The callback to call whenever data is decompressed\n  */\n  function AsyncDecompress(cb) {\n    this.G = AsyncGunzip;\n    this.I = AsyncInflate;\n    this.Z = AsyncUnzlib;\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be decompressed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  AsyncDecompress.prototype.push = function (chunk, final) {\n    Decompress.prototype.push.call(this, chunk, final);\n  };\n\n  return AsyncDecompress;\n}();\n\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzip(data, opts, cb) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflate(data, opts, cb) : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\n\nexport function decompressSync(data, out) {\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzipSync(data, out) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflateSync(data, out) : unzlibSync(data, out);\n} // flatten a directory structure\n\nvar fltn = function fltn(d, p, t, o) {\n  for (var k in d) {\n    var val = d[k],\n        n = p + k,\n        op = o;\n    if (Array.isArray(val)) op = mrg(o, val[1]), val = val[0];\n    if (val instanceof u8) t[n] = [val, op];else {\n      t[n += '/'] = [new u8(0), op];\n      fltn(val, n, t, o);\n    }\n  }\n}; // text encoder\n\n\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/new TextEncoder(); // text decoder\n\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/new TextDecoder(); // text decoder stream\n\nvar tds = 0;\n\ntry {\n  td.decode(et, {\n    stream: true\n  });\n  tds = 1;\n} catch (e) {} // decode UTF8\n\n\nvar dutf8 = function dutf8(d) {\n  for (var r = '', i = 0;;) {\n    var c = d[i++];\n    var eb = (c > 127) + (c > 223) + (c > 239);\n    if (i + eb > d.length) return [r, slc(d, i - 1)];\n    if (!eb) r += String.fromCharCode(c);else if (eb == 3) {\n      c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | d[i++] & 63) - 65536, r += String.fromCharCode(55296 | c >> 10, 56320 | c & 1023);\n    } else if (eb & 1) r += String.fromCharCode((c & 31) << 6 | d[i++] & 63);else r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | d[i++] & 63);\n  }\n};\n/**\n * Streaming UTF-8 decoding\n */\n\n\nvar DecodeUTF8 = /*#__PURE__*/function () {\n  /**\n   * Creates a UTF-8 decoding stream\n   * @param cb The callback to call whenever data is decoded\n   */\n  function DecodeUTF8(cb) {\n    this.ondata = cb;\n    if (tds) this.t = new TextDecoder();else this.p = et;\n  }\n  /**\n   * Pushes a chunk to be decoded from UTF-8 binary\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  DecodeUTF8.prototype.push = function (chunk, final) {\n    if (!this.ondata) err(5);\n    final = !!final;\n\n    if (this.t) {\n      this.ondata(this.t.decode(chunk, {\n        stream: true\n      }), final);\n\n      if (final) {\n        if (this.t.decode().length) err(8);\n        this.t = null;\n      }\n\n      return;\n    }\n\n    if (!this.p) err(4);\n    var dat = new u8(this.p.length + chunk.length);\n    dat.set(this.p);\n    dat.set(chunk, this.p.length);\n\n    var _a = dutf8(dat),\n        ch = _a[0],\n        np = _a[1];\n\n    if (final) {\n      if (np.length) err(8);\n      this.p = null;\n    } else this.p = np;\n\n    this.ondata(ch, final);\n  };\n\n  return DecodeUTF8;\n}();\n\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\n\nvar EncodeUTF8 = /*#__PURE__*/function () {\n  /**\n   * Creates a UTF-8 decoding stream\n   * @param cb The callback to call whenever data is encoded\n   */\n  function EncodeUTF8(cb) {\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be encoded to UTF-8\n   * @param chunk The string data to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  EncodeUTF8.prototype.push = function (chunk, final) {\n    if (!this.ondata) err(5);\n    if (this.d) err(4);\n    this.ondata(strToU8(chunk), this.d = final || false);\n  };\n\n  return EncodeUTF8;\n}();\n\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\n\nexport function strToU8(str, latin1) {\n  if (latin1) {\n    var ar_1 = new u8(str.length);\n\n    for (var i = 0; i < str.length; ++i) {\n      ar_1[i] = str.charCodeAt(i);\n    }\n\n    return ar_1;\n  }\n\n  if (te) return te.encode(str);\n  var l = str.length;\n  var ar = new u8(str.length + (str.length >> 1));\n  var ai = 0;\n\n  var w = function w(v) {\n    ar[ai++] = v;\n  };\n\n  for (var i = 0; i < l; ++i) {\n    if (ai + 5 > ar.length) {\n      var n = new u8(ai + 8 + (l - i << 1));\n      n.set(ar);\n      ar = n;\n    }\n\n    var c = str.charCodeAt(i);\n    if (c < 128 || latin1) w(c);else if (c < 2048) w(192 | c >> 6), w(128 | c & 63);else if (c > 55295 && c < 57344) c = 65536 + (c & 1023 << 10) | str.charCodeAt(++i) & 1023, w(240 | c >> 18), w(128 | c >> 12 & 63), w(128 | c >> 6 & 63), w(128 | c & 63);else w(224 | c >> 12), w(128 | c >> 6 & 63), w(128 | c & 63);\n  }\n\n  return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\n\nexport function strFromU8(dat, latin1) {\n  if (latin1) {\n    var r = '';\n\n    for (var i = 0; i < dat.length; i += 16384) {\n      r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n    }\n\n    return r;\n  } else if (td) return td.decode(dat);else {\n    var _a = dutf8(dat),\n        out = _a[0],\n        ext = _a[1];\n\n    if (ext.length) err(8);\n    return out;\n  }\n}\n; // deflate bit flag\n\nvar dbf = function dbf(l) {\n  return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0;\n}; // skip local zip header\n\n\nvar slzh = function slzh(d, b) {\n  return b + 30 + b2(d, b + 26) + b2(d, b + 28);\n}; // read zip header\n\n\nvar zh = function zh(d, b, z) {\n  var fnl = b2(d, b + 28),\n      fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)),\n      es = b + 46 + fnl,\n      bs = b4(d, b + 20);\n\n  var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)],\n      sc = _a[0],\n      su = _a[1],\n      off = _a[2];\n\n  return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n}; // read zip64 extra field\n\n\nvar z64e = function z64e(d, b) {\n  for (; b2(d, b) != 1; b += 4 + b2(d, b + 2)) {\n    ;\n  }\n\n  return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n}; // extra field length\n\n\nvar exfl = function exfl(ex) {\n  var le = 0;\n\n  if (ex) {\n    for (var k in ex) {\n      var l = ex[k].length;\n      if (l > 65535) err(9);\n      le += l + 4;\n    }\n  }\n\n  return le;\n}; // write zip header\n\n\nvar wzh = function wzh(d, b, f, fn, u, c, ce, co) {\n  var fl = fn.length,\n      ex = f.extra,\n      col = co && co.length;\n  var exl = exfl(ex);\n  wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n  if (ce != null) d[b++] = 20, d[b++] = f.os;\n  d[b] = 20, b += 2; // spec compliance? what's that?\n\n  d[b++] = f.flag << 1 | (c == null && 8), d[b++] = u && 8;\n  d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n  var dt = new Date(f.mtime == null ? Date.now() : f.mtime),\n      y = dt.getFullYear() - 1980;\n  if (y < 0 || y > 119) err(10);\n  wbytes(d, b, y << 25 | dt.getMonth() + 1 << 21 | dt.getDate() << 16 | dt.getHours() << 11 | dt.getMinutes() << 5 | dt.getSeconds() >>> 1), b += 4;\n\n  if (c != null) {\n    wbytes(d, b, f.crc);\n    wbytes(d, b + 4, c);\n    wbytes(d, b + 8, f.size);\n  }\n\n  wbytes(d, b + 12, fl);\n  wbytes(d, b + 14, exl), b += 16;\n\n  if (ce != null) {\n    wbytes(d, b, col);\n    wbytes(d, b + 6, f.attrs);\n    wbytes(d, b + 10, ce), b += 14;\n  }\n\n  d.set(fn, b);\n  b += fl;\n\n  if (exl) {\n    for (var k in ex) {\n      var exf = ex[k],\n          l = exf.length;\n      wbytes(d, b, +k);\n      wbytes(d, b + 2, l);\n      d.set(exf, b + 4), b += 4 + l;\n    }\n  }\n\n  if (col) d.set(co, b), b += col;\n  return b;\n}; // write zip footer (end of central directory)\n\n\nvar wzf = function wzf(o, b, c, d, e) {\n  wbytes(o, b, 0x6054B50); // skip disk\n\n  wbytes(o, b + 8, c);\n  wbytes(o, b + 10, c);\n  wbytes(o, b + 12, d);\n  wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\n\n\nvar ZipPassThrough = /*#__PURE__*/function () {\n  /**\n   * Creates a pass-through stream that can be added to ZIP archives\n   * @param filename The filename to associate with this data stream\n   */\n  function ZipPassThrough(filename) {\n    this.filename = filename;\n    this.c = crc();\n    this.size = 0;\n    this.compression = 0;\n  }\n  /**\n   * Processes a chunk and pushes to the output stream. You can override this\n   * method in a subclass for custom behavior, but by default this passes\n   * the data through. You must call this.ondata(err, chunk, final) at some\n   * point in this method.\n   * @param chunk The chunk to process\n   * @param final Whether this is the last chunk\n   */\n\n\n  ZipPassThrough.prototype.process = function (chunk, final) {\n    this.ondata(null, chunk, final);\n  };\n  /**\n   * Pushes a chunk to be added. If you are subclassing this with a custom\n   * compression algorithm, note that you must push data from the source\n   * file only, pre-compression.\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  ZipPassThrough.prototype.push = function (chunk, final) {\n    if (!this.ondata) err(5);\n    this.c.p(chunk);\n    this.size += chunk.length;\n    if (final) this.crc = this.c.d();\n    this.process(chunk, final || false);\n  };\n\n  return ZipPassThrough;\n}();\n\nexport { ZipPassThrough }; // I don't extend because TypeScript extension adds 1kB of runtime bloat\n\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\n\nvar ZipDeflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE stream that can be added to ZIP archives\n   * @param filename The filename to associate with this data stream\n   * @param opts The compression options\n   */\n  function ZipDeflate(filename, opts) {\n    var _this_1 = this;\n\n    if (!opts) opts = {};\n    ZipPassThrough.call(this, filename);\n    this.d = new Deflate(opts, function (dat, final) {\n      _this_1.ondata(null, dat, final);\n    });\n    this.compression = 8;\n    this.flag = dbf(opts.level);\n  }\n\n  ZipDeflate.prototype.process = function (chunk, final) {\n    try {\n      this.d.push(chunk, final);\n    } catch (e) {\n      this.ondata(e, null, final);\n    }\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  ZipDeflate.prototype.push = function (chunk, final) {\n    ZipPassThrough.prototype.push.call(this, chunk, final);\n  };\n\n  return ZipDeflate;\n}();\n\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\n\nvar AsyncZipDeflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE stream that can be added to ZIP archives\n   * @param filename The filename to associate with this data stream\n   * @param opts The compression options\n   */\n  function AsyncZipDeflate(filename, opts) {\n    var _this_1 = this;\n\n    if (!opts) opts = {};\n    ZipPassThrough.call(this, filename);\n    this.d = new AsyncDeflate(opts, function (err, dat, final) {\n      _this_1.ondata(err, dat, final);\n    });\n    this.compression = 8;\n    this.flag = dbf(opts.level);\n    this.terminate = this.d.terminate;\n  }\n\n  AsyncZipDeflate.prototype.process = function (chunk, final) {\n    this.d.push(chunk, final);\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  AsyncZipDeflate.prototype.push = function (chunk, final) {\n    ZipPassThrough.prototype.push.call(this, chunk, final);\n  };\n\n  return AsyncZipDeflate;\n}();\n\nexport { AsyncZipDeflate }; // TODO: Better tree shaking\n\n/**\n * A zippable archive to which files can incrementally be added\n */\n\nvar Zip = /*#__PURE__*/function () {\n  /**\n   * Creates an empty ZIP archive to which files can be added\n   * @param cb The callback to call whenever data for the generated ZIP archive\n   *           is available\n   */\n  function Zip(cb) {\n    this.ondata = cb;\n    this.u = [];\n    this.d = 1;\n  }\n  /**\n   * Adds a file to the ZIP archive\n   * @param file The file stream to add\n   */\n\n\n  Zip.prototype.add = function (file) {\n    var _this_1 = this;\n\n    if (!this.ondata) err(5); // finishing or finished\n\n    if (this.d & 2) this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);else {\n      var f = strToU8(file.filename),\n          fl_1 = f.length;\n      var com = file.comment,\n          o = com && strToU8(com);\n      var u = fl_1 != file.filename.length || o && com.length != o.length;\n      var hl_1 = fl_1 + exfl(file.extra) + 30;\n      if (fl_1 > 65535) this.ondata(err(11, 0, 1), null, false);\n      var header = new u8(hl_1);\n      wzh(header, 0, file, f, u);\n      var chks_1 = [header];\n\n      var pAll_1 = function pAll_1() {\n        for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n          var chk = chks_2[_i];\n\n          _this_1.ondata(null, chk, false);\n        }\n\n        chks_1 = [];\n      };\n\n      var tr_1 = this.d;\n      this.d = 0;\n      var ind_1 = this.u.length;\n      var uf_1 = mrg(file, {\n        f: f,\n        u: u,\n        o: o,\n        t: function t() {\n          if (file.terminate) file.terminate();\n        },\n        r: function r() {\n          pAll_1();\n\n          if (tr_1) {\n            var nxt = _this_1.u[ind_1 + 1];\n            if (nxt) nxt.r();else _this_1.d = 1;\n          }\n\n          tr_1 = 1;\n        }\n      });\n      var cl_1 = 0;\n\n      file.ondata = function (err, dat, final) {\n        if (err) {\n          _this_1.ondata(err, dat, final);\n\n          _this_1.terminate();\n        } else {\n          cl_1 += dat.length;\n          chks_1.push(dat);\n\n          if (final) {\n            var dd = new u8(16);\n            wbytes(dd, 0, 0x8074B50);\n            wbytes(dd, 4, file.crc);\n            wbytes(dd, 8, cl_1);\n            wbytes(dd, 12, file.size);\n            chks_1.push(dd);\n            uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n            if (tr_1) uf_1.r();\n            tr_1 = 1;\n          } else if (tr_1) pAll_1();\n        }\n      };\n\n      this.u.push(uf_1);\n    }\n  };\n  /**\n   * Ends the process of adding files and prepares to emit the final chunks.\n   * This *must* be called after adding all desired files for the resulting\n   * ZIP file to work properly.\n   */\n\n\n  Zip.prototype.end = function () {\n    var _this_1 = this;\n\n    if (this.d & 2) {\n      this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n      return;\n    }\n\n    if (this.d) this.e();else this.u.push({\n      r: function r() {\n        if (!(_this_1.d & 1)) return;\n\n        _this_1.u.splice(-1, 1);\n\n        _this_1.e();\n      },\n      t: function t() {}\n    });\n    this.d = 3;\n  };\n\n  Zip.prototype.e = function () {\n    var bt = 0,\n        l = 0,\n        tl = 0;\n\n    for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n      var f = _a[_i];\n      tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n    }\n\n    var out = new u8(tl + 22);\n\n    for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n      var f = _c[_b];\n      wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\n      bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n    }\n\n    wzf(out, bt, this.u.length, tl, l);\n    this.ondata(null, out, true);\n    this.d = 2;\n  };\n  /**\n   * A method to terminate any internal workers used by the stream. Subsequent\n   * calls to add() will fail.\n   */\n\n\n  Zip.prototype.terminate = function () {\n    for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n      var f = _a[_i];\n      f.t();\n    }\n\n    this.d = 2;\n  };\n\n  return Zip;\n}();\n\nexport { Zip };\nexport function zip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  var r = {};\n  fltn(data, '', r, opts);\n  var k = Object.keys(r);\n  var lft = k.length,\n      o = 0,\n      tot = 0;\n  var slft = lft,\n      files = new Array(lft);\n  var term = [];\n\n  var tAll = function tAll() {\n    for (var i = 0; i < term.length; ++i) {\n      term[i]();\n    }\n  };\n\n  var cbd = function cbd(a, b) {\n    mt(function () {\n      cb(a, b);\n    });\n  };\n\n  mt(function () {\n    cbd = cb;\n  });\n\n  var cbf = function cbf() {\n    var out = new u8(tot + 22),\n        oe = o,\n        cdl = tot - o;\n    tot = 0;\n\n    for (var i = 0; i < slft; ++i) {\n      var f = files[i];\n\n      try {\n        var l = f.c.length;\n        wzh(out, tot, f, f.f, f.u, l);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        var loc = tot + badd;\n        out.set(f.c, loc);\n        wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n      } catch (e) {\n        return cbd(e, null);\n      }\n    }\n\n    wzf(out, o, files.length, cdl, oe);\n    cbd(null, out);\n  };\n\n  if (!lft) cbf();\n\n  var _loop_1 = function _loop_1(i) {\n    var fn = k[i];\n    var _a = r[fn],\n        file = _a[0],\n        p = _a[1];\n    var c = crc(),\n        size = file.length;\n    c.p(file);\n    var f = strToU8(fn),\n        s = f.length;\n    var com = p.comment,\n        m = com && strToU8(com),\n        ms = m && m.length;\n    var exl = exfl(p.extra);\n    var compression = p.level == 0 ? 0 : 8;\n\n    var cbl = function cbl(e, d) {\n      if (e) {\n        tAll();\n        cbd(e, null);\n      } else {\n        var l = d.length;\n        files[i] = mrg(p, {\n          size: size,\n          crc: c.d(),\n          c: d,\n          f: f,\n          m: m,\n          u: s != fn.length || m && com.length != ms,\n          compression: compression\n        });\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n        if (! --lft) cbf();\n      }\n    };\n\n    if (s > 65535) cbl(err(11, 0, 1), null);\n    if (!compression) cbl(null, file);else if (size < 160000) {\n      try {\n        cbl(null, deflateSync(file, p));\n      } catch (e) {\n        cbl(e, null);\n      }\n    } else term.push(deflate(file, p, cbl));\n  }; // Cannot use lft because it can decrease\n\n\n  for (var i = 0; i < slft; ++i) {\n    _loop_1(i);\n  }\n\n  return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\n\nexport function zipSync(data, opts) {\n  if (!opts) opts = {};\n  var r = {};\n  var files = [];\n  fltn(data, '', r, opts);\n  var o = 0;\n  var tot = 0;\n\n  for (var fn in r) {\n    var _a = r[fn],\n        file = _a[0],\n        p = _a[1];\n    var compression = p.level == 0 ? 0 : 8;\n    var f = strToU8(fn),\n        s = f.length;\n    var com = p.comment,\n        m = com && strToU8(com),\n        ms = m && m.length;\n    var exl = exfl(p.extra);\n    if (s > 65535) err(11);\n    var d = compression ? deflateSync(file, p) : file,\n        l = d.length;\n    var c = crc();\n    c.p(file);\n    files.push(mrg(p, {\n      size: file.length,\n      crc: c.d(),\n      c: d,\n      f: f,\n      m: m,\n      u: s != fn.length || m && com.length != ms,\n      o: o,\n      compression: compression\n    }));\n    o += 30 + s + exl + l;\n    tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n  }\n\n  var out = new u8(tot + 22),\n      oe = o,\n      cdl = tot - o;\n\n  for (var i = 0; i < files.length; ++i) {\n    var f = files[i];\n    wzh(out, f.o, f, f.f, f.u, f.c.length);\n    var badd = 30 + f.f.length + exfl(f.extra);\n    out.set(f.c, f.o + badd);\n    wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n  }\n\n  wzf(out, o, files.length, cdl, oe);\n  return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\n\nvar UnzipPassThrough = /*#__PURE__*/function () {\n  function UnzipPassThrough() {}\n\n  UnzipPassThrough.prototype.push = function (data, final) {\n    this.ondata(null, data, final);\n  };\n\n  UnzipPassThrough.compression = 0;\n  return UnzipPassThrough;\n}();\n\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\n\nvar UnzipInflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE decompression that can be used in ZIP archives\n   */\n  function UnzipInflate() {\n    var _this_1 = this;\n\n    this.i = new Inflate(function (dat, final) {\n      _this_1.ondata(null, dat, final);\n    });\n  }\n\n  UnzipInflate.prototype.push = function (data, final) {\n    try {\n      this.i.push(data, final);\n    } catch (e) {\n      this.ondata(e, null, final);\n    }\n  };\n\n  UnzipInflate.compression = 8;\n  return UnzipInflate;\n}();\n\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\n\nvar AsyncUnzipInflate = /*#__PURE__*/function () {\n  /**\n   * Creates a DEFLATE decompression that can be used in ZIP archives\n   */\n  function AsyncUnzipInflate(_, sz) {\n    var _this_1 = this;\n\n    if (sz < 320000) {\n      this.i = new Inflate(function (dat, final) {\n        _this_1.ondata(null, dat, final);\n      });\n    } else {\n      this.i = new AsyncInflate(function (err, dat, final) {\n        _this_1.ondata(err, dat, final);\n      });\n      this.terminate = this.i.terminate;\n    }\n  }\n\n  AsyncUnzipInflate.prototype.push = function (data, final) {\n    if (this.i.terminate) data = slc(data, 0);\n    this.i.push(data, final);\n  };\n\n  AsyncUnzipInflate.compression = 8;\n  return AsyncUnzipInflate;\n}();\n\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\n\nvar Unzip = /*#__PURE__*/function () {\n  /**\n   * Creates a ZIP decompression stream\n   * @param cb The callback to call whenever a file in the ZIP archive is found\n   */\n  function Unzip(cb) {\n    this.onfile = cb;\n    this.k = [];\n    this.o = {\n      0: UnzipPassThrough\n    };\n    this.p = et;\n  }\n  /**\n   * Pushes a chunk to be unzipped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n\n\n  Unzip.prototype.push = function (chunk, final) {\n    var _this_1 = this;\n\n    if (!this.onfile) err(5);\n    if (!this.p) err(4);\n\n    if (this.c > 0) {\n      var len = Math.min(this.c, chunk.length);\n      var toAdd = chunk.subarray(0, len);\n      this.c -= len;\n      if (this.d) this.d.push(toAdd, !this.c);else this.k[0].push(toAdd);\n      chunk = chunk.subarray(len);\n      if (chunk.length) return this.push(chunk, final);\n    } else {\n      var f = 0,\n          i = 0,\n          is = void 0,\n          buf = void 0;\n      if (!this.p.length) buf = chunk;else if (!chunk.length) buf = this.p;else {\n        buf = new u8(this.p.length + chunk.length);\n        buf.set(this.p), buf.set(chunk, this.p.length);\n      }\n      var l = buf.length,\n          oc = this.c,\n          add = oc && this.d;\n\n      var _loop_2 = function _loop_2() {\n        var _a;\n\n        var sig = b4(buf, i);\n\n        if (sig == 0x4034B50) {\n          f = 1, is = i;\n          this_1.d = null;\n          this_1.c = 0;\n          var bf = b2(buf, i + 6),\n              cmp_1 = b2(buf, i + 8),\n              u = bf & 2048,\n              dd = bf & 8,\n              fnl = b2(buf, i + 26),\n              es = b2(buf, i + 28);\n\n          if (l > i + 30 + fnl + es) {\n            var chks_3 = [];\n            this_1.k.unshift(chks_3);\n            f = 2;\n            var sc_1 = b4(buf, i + 18),\n                su_1 = b4(buf, i + 22);\n            var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n\n            if (sc_1 == 4294967295) {\n              _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n            } else if (dd) sc_1 = -1;\n\n            i += es;\n            this_1.c = sc_1;\n            var d_1;\n            var file_1 = {\n              name: fn_1,\n              compression: cmp_1,\n              start: function start() {\n                if (!file_1.ondata) err(5);\n                if (!sc_1) file_1.ondata(null, et, true);else {\n                  var ctr = _this_1.o[cmp_1];\n                  if (!ctr) file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                  d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n\n                  d_1.ondata = function (err, dat, final) {\n                    file_1.ondata(err, dat, final);\n                  };\n\n                  for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                    var dat = chks_4[_i];\n                    d_1.push(dat, false);\n                  }\n\n                  if (_this_1.k[0] == chks_3 && _this_1.c) _this_1.d = d_1;else d_1.push(et, true);\n                }\n              },\n              terminate: function terminate() {\n                if (d_1 && d_1.terminate) d_1.terminate();\n              }\n            };\n            if (sc_1 >= 0) file_1.size = sc_1, file_1.originalSize = su_1;\n            this_1.onfile(file_1);\n          }\n\n          return \"break\";\n        } else if (oc) {\n          if (sig == 0x8074B50) {\n            is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n            return \"break\";\n          } else if (sig == 0x2014B50) {\n            is = i -= 4, f = 3, this_1.c = 0;\n            return \"break\";\n          }\n        }\n      };\n\n      var this_1 = this;\n\n      for (; i < l - 4; ++i) {\n        var state_1 = _loop_2();\n\n        if (state_1 === \"break\") break;\n      }\n\n      this.p = et;\n\n      if (oc < 0) {\n        var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n        if (add) add.push(dat, !!f);else this.k[+(f == 2)].push(dat);\n      }\n\n      if (f & 2) return this.push(buf.subarray(i), final);\n      this.p = buf.subarray(i);\n    }\n\n    if (final) {\n      if (this.c) err(13);\n      this.p = null;\n    }\n  };\n  /**\n   * Registers a decoder with the stream, allowing for files compressed with\n   * the compression type provided to be expanded correctly\n   * @param decoder The decoder constructor\n   */\n\n\n  Unzip.prototype.register = function (decoder) {\n    this.o[decoder.compression] = decoder;\n  };\n\n  return Unzip;\n}();\n\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) {\n  fn();\n};\nexport function unzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') err(7);\n  var term = [];\n\n  var tAll = function tAll() {\n    for (var i = 0; i < term.length; ++i) {\n      term[i]();\n    }\n  };\n\n  var files = {};\n\n  var cbd = function cbd(a, b) {\n    mt(function () {\n      cb(a, b);\n    });\n  };\n\n  mt(function () {\n    cbd = cb;\n  });\n  var e = data.length - 22;\n\n  for (; b4(data, e) != 0x6054B50; --e) {\n    if (!e || data.length - e > 65558) {\n      cbd(err(13, 0, 1), null);\n      return tAll;\n    }\n  }\n\n  ;\n  var lft = b2(data, e + 8);\n\n  if (lft) {\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n\n    if (z) {\n      e = b4(data, e - 12);\n\n      if (b4(data, e) != 0x6064B50) {\n        cbd(err(13, 0, 1), null);\n        return tAll;\n      }\n\n      c = lft = b4(data, e + 32);\n      o = b4(data, e + 48);\n    }\n\n    var fltr = opts && opts.filter;\n\n    var _loop_3 = function _loop_3(i) {\n      var _a = zh(data, o, z),\n          c_1 = _a[0],\n          sc = _a[1],\n          su = _a[2],\n          fn = _a[3],\n          no = _a[4],\n          off = _a[5],\n          b = slzh(data, off);\n\n      o = no;\n\n      var cbl = function cbl(e, d) {\n        if (e) {\n          tAll();\n          cbd(e, null);\n        } else {\n          if (d) files[fn] = d;\n          if (! --lft) cbd(null, files);\n        }\n      };\n\n      if (!fltr || fltr({\n        name: fn,\n        size: sc,\n        originalSize: su,\n        compression: c_1\n      })) {\n        if (!c_1) cbl(null, slc(data, b, b + sc));else if (c_1 == 8) {\n          var infl = data.subarray(b, b + sc);\n\n          if (sc < 320000) {\n            try {\n              cbl(null, inflateSync(infl, new u8(su)));\n            } catch (e) {\n              cbl(e, null);\n            }\n          } else term.push(inflate(infl, {\n            size: su\n          }, cbl));\n        } else cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n      } else cbl(null, null);\n    };\n\n    for (var i = 0; i < c; ++i) {\n      _loop_3(i);\n    }\n  } else cbd(null, {});\n\n  return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\n\nexport function unzipSync(data, opts) {\n  var files = {};\n  var e = data.length - 22;\n\n  for (; b4(data, e) != 0x6054B50; --e) {\n    if (!e || data.length - e > 65558) err(13);\n  }\n\n  ;\n  var c = b2(data, e + 8);\n  if (!c) return {};\n  var o = b4(data, e + 16);\n  var z = o == 4294967295;\n\n  if (z) {\n    e = b4(data, e - 12);\n    if (b4(data, e) != 0x6064B50) err(13);\n    c = b4(data, e + 32);\n    o = b4(data, e + 48);\n  }\n\n  var fltr = opts && opts.filter;\n\n  for (var i = 0; i < c; ++i) {\n    var _a = zh(data, o, z),\n        c_2 = _a[0],\n        sc = _a[1],\n        su = _a[2],\n        fn = _a[3],\n        no = _a[4],\n        off = _a[5],\n        b = slzh(data, off);\n\n    o = no;\n\n    if (!fltr || fltr({\n      name: fn,\n      size: sc,\n      originalSize: su,\n      compression: c_2\n    })) {\n      if (!c_2) files[fn] = slc(data, b, b + sc);else if (c_2 == 8) files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));else err(14, 'unknown compression type ' + c_2);\n    }\n  }\n\n  return files;\n}","import _classCallCheck from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _inherits from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { DataTextureLoader, DataUtils, FloatType, HalfFloatType, LinearEncoding, LinearFilter } from 'three'; // https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar RGBELoader = /*#__PURE__*/function (_DataTextureLoader) {\n  _inherits(RGBELoader, _DataTextureLoader);\n\n  var _super = _createSuper(RGBELoader);\n\n  function RGBELoader(manager) {\n    var _this;\n\n    _classCallCheck(this, RGBELoader);\n\n    _this = _super.call(this, manager);\n    _this.type = HalfFloatType;\n    return _this;\n  } // adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\n  _createClass(RGBELoader, [{\n    key: \"parse\",\n    value: function parse(buffer) {\n      var\n      /* return codes for rgbe routines */\n      //RGBE_RETURN_SUCCESS = 0,\n      RGBE_RETURN_FAILURE = -1,\n\n      /* default error routine.  change this to change error handling */\n      rgbe_read_error = 1,\n          rgbe_write_error = 2,\n          rgbe_format_error = 3,\n          rgbe_memory_error = 4,\n          rgbe_error = function rgbe_error(rgbe_error_code, msg) {\n        switch (rgbe_error_code) {\n          case rgbe_read_error:\n            console.error('THREE.RGBELoader Read Error: ' + (msg || ''));\n            break;\n\n          case rgbe_write_error:\n            console.error('THREE.RGBELoader Write Error: ' + (msg || ''));\n            break;\n\n          case rgbe_format_error:\n            console.error('THREE.RGBELoader Bad File Format: ' + (msg || ''));\n            break;\n\n          default:\n          case rgbe_memory_error:\n            console.error('THREE.RGBELoader: Error: ' + (msg || ''));\n        }\n\n        return RGBE_RETURN_FAILURE;\n      },\n\n      /* offsets to red, green, and blue components in a data (float) pixel */\n      //RGBE_DATA_RED = 0,\n      //RGBE_DATA_GREEN = 1,\n      //RGBE_DATA_BLUE = 2,\n\n      /* number of floats per pixel, use 4 since stored in rgba image format */\n      //RGBE_DATA_SIZE = 4,\n\n      /* flags indicating which fields in an rgbe_header_info are valid */\n      RGBE_VALID_PROGRAMTYPE = 1,\n          RGBE_VALID_FORMAT = 2,\n          RGBE_VALID_DIMENSIONS = 4,\n          NEWLINE = '\\n',\n          fgets = function fgets(buffer, lineLimit, consume) {\n        var chunkSize = 128;\n        lineLimit = !lineLimit ? 1024 : lineLimit;\n        var p = buffer.pos,\n            i = -1,\n            len = 0,\n            s = '',\n            chunk = String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)));\n\n        while (0 > (i = chunk.indexOf(NEWLINE)) && len < lineLimit && p < buffer.byteLength) {\n          s += chunk;\n          len += chunk.length;\n          p += chunkSize;\n          chunk += String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)));\n        }\n\n        if (-1 < i) {\n          /*for (i=l-1; i>=0; i--) {\n          \tbyteCode = m.charCodeAt(i);\n          \tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n          \telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n          \tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n          }*/\n          if (false !== consume) buffer.pos += len + i + 1;\n          return s + chunk.slice(0, i);\n        }\n\n        return false;\n      },\n\n      /* minimal header reading.  modify if you want to parse more information */\n      RGBE_ReadHeader = function RGBE_ReadHeader(buffer) {\n        // regexes to parse header info fields\n        var magic_token_re = /^#\\?(\\S+)/,\n            gamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n            exposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n            format_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n            dimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n            // RGBE format header struct\n        header = {\n          valid: 0,\n\n          /* indicate which fields are valid */\n          string: '',\n\n          /* the actual header string */\n          comments: '',\n\n          /* comments found in header */\n          programtype: 'RGBE',\n\n          /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n          format: '',\n\n          /* RGBE format, default 32-bit_rle_rgbe */\n          gamma: 1.0,\n\n          /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n          exposure: 1.0,\n\n          /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n          width: 0,\n          height: 0\n          /* image dimensions, width/height */\n\n        };\n        var line, match;\n\n        if (buffer.pos >= buffer.byteLength || !(line = fgets(buffer))) {\n          return rgbe_error(rgbe_read_error, 'no header found');\n        }\n        /* if you want to require the magic token then uncomment the next line */\n\n\n        if (!(match = line.match(magic_token_re))) {\n          return rgbe_error(rgbe_format_error, 'bad initial token');\n        }\n\n        header.valid |= RGBE_VALID_PROGRAMTYPE;\n        header.programtype = match[1];\n        header.string += line + '\\n';\n\n        while (true) {\n          line = fgets(buffer);\n          if (false === line) break;\n          header.string += line + '\\n';\n\n          if ('#' === line.charAt(0)) {\n            header.comments += line + '\\n';\n            continue; // comment line\n          }\n\n          if (match = line.match(gamma_re)) {\n            header.gamma = parseFloat(match[1]);\n          }\n\n          if (match = line.match(exposure_re)) {\n            header.exposure = parseFloat(match[1]);\n          }\n\n          if (match = line.match(format_re)) {\n            header.valid |= RGBE_VALID_FORMAT;\n            header.format = match[1]; //'32-bit_rle_rgbe';\n          }\n\n          if (match = line.match(dimensions_re)) {\n            header.valid |= RGBE_VALID_DIMENSIONS;\n            header.height = parseInt(match[1], 10);\n            header.width = parseInt(match[2], 10);\n          }\n\n          if (header.valid & RGBE_VALID_FORMAT && header.valid & RGBE_VALID_DIMENSIONS) break;\n        }\n\n        if (!(header.valid & RGBE_VALID_FORMAT)) {\n          return rgbe_error(rgbe_format_error, 'missing format specifier');\n        }\n\n        if (!(header.valid & RGBE_VALID_DIMENSIONS)) {\n          return rgbe_error(rgbe_format_error, 'missing image size specifier');\n        }\n\n        return header;\n      },\n          RGBE_ReadPixels_RLE = function RGBE_ReadPixels_RLE(buffer, w, h) {\n        var scanline_width = w;\n\n        if ( // run length encoding is not allowed so read flat\n        scanline_width < 8 || scanline_width > 0x7fff || // this file is not run length encoded\n        2 !== buffer[0] || 2 !== buffer[1] || buffer[2] & 0x80) {\n          // return the flat buffer\n          return new Uint8Array(buffer);\n        }\n\n        if (scanline_width !== (buffer[2] << 8 | buffer[3])) {\n          return rgbe_error(rgbe_format_error, 'wrong scanline width');\n        }\n\n        var data_rgba = new Uint8Array(4 * w * h);\n\n        if (!data_rgba.length) {\n          return rgbe_error(rgbe_memory_error, 'unable to allocate buffer space');\n        }\n\n        var offset = 0,\n            pos = 0;\n        var ptr_end = 4 * scanline_width;\n        var rgbeStart = new Uint8Array(4);\n        var scanline_buffer = new Uint8Array(ptr_end);\n        var num_scanlines = h; // read in each successive scanline\n\n        while (num_scanlines > 0 && pos < buffer.byteLength) {\n          if (pos + 4 > buffer.byteLength) {\n            return rgbe_error(rgbe_read_error);\n          }\n\n          rgbeStart[0] = buffer[pos++];\n          rgbeStart[1] = buffer[pos++];\n          rgbeStart[2] = buffer[pos++];\n          rgbeStart[3] = buffer[pos++];\n\n          if (2 != rgbeStart[0] || 2 != rgbeStart[1] || (rgbeStart[2] << 8 | rgbeStart[3]) != scanline_width) {\n            return rgbe_error(rgbe_format_error, 'bad rgbe scanline format');\n          } // read each of the four channels for the scanline into the buffer\n          // first red, then green, then blue, then exponent\n\n\n          var ptr = 0,\n              count = void 0;\n\n          while (ptr < ptr_end && pos < buffer.byteLength) {\n            count = buffer[pos++];\n            var isEncodedRun = count > 128;\n            if (isEncodedRun) count -= 128;\n\n            if (0 === count || ptr + count > ptr_end) {\n              return rgbe_error(rgbe_format_error, 'bad scanline data');\n            }\n\n            if (isEncodedRun) {\n              // a (encoded) run of the same value\n              var byteValue = buffer[pos++];\n\n              for (var i = 0; i < count; i++) {\n                scanline_buffer[ptr++] = byteValue;\n              } //ptr += count;\n\n            } else {\n              // a literal-run\n              scanline_buffer.set(buffer.subarray(pos, pos + count), ptr);\n              ptr += count;\n              pos += count;\n            }\n          } // now convert data from buffer into rgba\n          // first red, then green, then blue, then exponent (alpha)\n\n\n          var l = scanline_width; //scanline_buffer.byteLength;\n\n          for (var _i = 0; _i < l; _i++) {\n            var off = 0;\n            data_rgba[offset] = scanline_buffer[_i + off];\n            off += scanline_width; //1;\n\n            data_rgba[offset + 1] = scanline_buffer[_i + off];\n            off += scanline_width; //1;\n\n            data_rgba[offset + 2] = scanline_buffer[_i + off];\n            off += scanline_width; //1;\n\n            data_rgba[offset + 3] = scanline_buffer[_i + off];\n            offset += 4;\n          }\n\n          num_scanlines--;\n        }\n\n        return data_rgba;\n      };\n\n      var RGBEByteToRGBFloat = function RGBEByteToRGBFloat(sourceArray, sourceOffset, destArray, destOffset) {\n        var e = sourceArray[sourceOffset + 3];\n        var scale = Math.pow(2.0, e - 128.0) / 255.0;\n        destArray[destOffset + 0] = sourceArray[sourceOffset + 0] * scale;\n        destArray[destOffset + 1] = sourceArray[sourceOffset + 1] * scale;\n        destArray[destOffset + 2] = sourceArray[sourceOffset + 2] * scale;\n        destArray[destOffset + 3] = 1;\n      };\n\n      var RGBEByteToRGBHalf = function RGBEByteToRGBHalf(sourceArray, sourceOffset, destArray, destOffset) {\n        var e = sourceArray[sourceOffset + 3];\n        var scale = Math.pow(2.0, e - 128.0) / 255.0; // clamping to 65504, the maximum representable value in float16\n\n        destArray[destOffset + 0] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 0] * scale, 65504));\n        destArray[destOffset + 1] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 1] * scale, 65504));\n        destArray[destOffset + 2] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 2] * scale, 65504));\n        destArray[destOffset + 3] = DataUtils.toHalfFloat(1);\n      };\n\n      var byteArray = new Uint8Array(buffer);\n      byteArray.pos = 0;\n      var rgbe_header_info = RGBE_ReadHeader(byteArray);\n\n      if (RGBE_RETURN_FAILURE !== rgbe_header_info) {\n        var w = rgbe_header_info.width,\n            h = rgbe_header_info.height,\n            image_rgba_data = RGBE_ReadPixels_RLE(byteArray.subarray(byteArray.pos), w, h);\n\n        if (RGBE_RETURN_FAILURE !== image_rgba_data) {\n          var data, format, type;\n          var numElements;\n\n          switch (this.type) {\n            case FloatType:\n              numElements = image_rgba_data.length / 4;\n              var floatArray = new Float32Array(numElements * 4);\n\n              for (var j = 0; j < numElements; j++) {\n                RGBEByteToRGBFloat(image_rgba_data, j * 4, floatArray, j * 4);\n              }\n\n              data = floatArray;\n              type = FloatType;\n              break;\n\n            case HalfFloatType:\n              numElements = image_rgba_data.length / 4;\n              var halfArray = new Uint16Array(numElements * 4);\n\n              for (var _j = 0; _j < numElements; _j++) {\n                RGBEByteToRGBHalf(image_rgba_data, _j * 4, halfArray, _j * 4);\n              }\n\n              data = halfArray;\n              type = HalfFloatType;\n              break;\n\n            default:\n              console.error('THREE.RGBELoader: unsupported type: ', this.type);\n              break;\n          }\n\n          return {\n            width: w,\n            height: h,\n            data: data,\n            header: rgbe_header_info.string,\n            gamma: rgbe_header_info.gamma,\n            exposure: rgbe_header_info.exposure,\n            format: format,\n            type: type\n          };\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setDataType\",\n    value: function setDataType(value) {\n      this.type = value;\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      function onLoadCallback(texture, texData) {\n        switch (texture.type) {\n          case FloatType:\n            texture.encoding = LinearEncoding;\n            texture.minFilter = LinearFilter;\n            texture.magFilter = LinearFilter;\n            texture.generateMipmaps = false;\n            texture.flipY = true;\n            break;\n\n          case HalfFloatType:\n            texture.encoding = LinearEncoding;\n            texture.minFilter = LinearFilter;\n            texture.magFilter = LinearFilter;\n            texture.generateMipmaps = false;\n            texture.flipY = true;\n            break;\n        }\n\n        if (onLoad) onLoad(texture, texData);\n      }\n\n      return _get(_getPrototypeOf(RGBELoader.prototype), \"load\", this).call(this, url, onLoadCallback, onProgress, onError);\n    }\n  }]);\n\n  return RGBELoader;\n}(DataTextureLoader);\n\nexport { RGBELoader };","import * as React from \"react\";\nimport { useState } from \"react\";\nimport Stack from \"@mui/material/Stack\";\nimport { styled } from \"@mui/material/styles\";\nimport Paper from \"@mui/material/Paper\";\nimport PointsViewer from \"./points-viewer\";\nimport * as wasm from \"../../../pkg\";\nimport { roughness } from \"../consts\";\nimport { Button, Container, TextField, Typography } from \"@mui/material\";\nimport {\n  downloadBlob,\n  downloadBlurredHDR,\n  generateDiffuseIrradianceMap,\n  generatePreFilteredSpecularMap,\n  webGpuTest,\n} from \"../util\";\n// import VisualDebug from \"./visual-debug\";\nimport Header from \"./header\";\nimport StatusTable from \"./status-table\";\nimport * as fflate from \"fflate\";\n// import PMREMDebug from \"./pmrem-debug\";\n// import OutlierDebug from \"./outlier-debug\";\nimport InputImage from \"./input-image\";\nimport PMREMDebug from \"./pmrem-debug\";\nimport ThreeDebug from \"./three-debug\";\nimport { pmremCubemap } from \"../pmrem-cubemap\";\n\nconst Item = styled(Paper)(({ theme }) => ({\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: \"center\",\n  color: theme.palette.text.secondary,\n  // width: \"300px\",\n  // height: \"300px\",\n}));\n\nexport default function Everything() {\n  const [items, setItems] = useState<Map<string, Uint8Array>>(new Map());\n  const [diffuseSampleSize, setDiffuseSampleSize] = useState(7000);\n  const [specularSampleSize, setSpecularSampleSize] = useState(2000);\n  const [specularMapSize, setSpecularMapSize] = useState(128);\n  const [specularMipLevels, setSpecularMipLevels] = useState(8);\n  const [blurSigma, setBlurSigma] = useState(\"0.1\");\n  const [image, setImage] = useState<Uint8Array | null>(null);\n  return (\n    <Stack spacing={2} alignItems=\"center\">\n      <Header />\n      <InputImage onFile={setImage} />\n\n      <Stack direction=\"row\" spacing={2}>\n        <Item>\n          <Stack spacing={2} alignItems=\"center\">\n            <Typography variant=\"h6\">Diffuse Irradiance Map</Typography>\n\n            <Item>\n              <Typography>sampling pattern (Fibonacci sphere)</Typography>\n\n              <PointsViewer\n                buffer={() => wasm.fibonacci_hemi_sphere(300)}\n                itemSize={3}\n                uniqueId=\"fibo\"\n              />\n            </Item>\n            <Stack direction=\"row\" spacing={2}>\n              <TextField\n                style={{ width: 120 }}\n                id=\"outlined-number\"\n                label=\"sample size\"\n                type=\"number\"\n                value={diffuseSampleSize}\n                onChange={(e) =>\n                  setDiffuseSampleSize(Number.parseInt(e.target.value))\n                }\n              />\n              <TextField\n                style={{ width: 120 }}\n                id=\"outlined-number\"\n                label=\"blur sigma\"\n                value={blurSigma}\n                onChange={(e) => setBlurSigma(e.target.value)}\n              />\n            </Stack>\n\n            <Button\n              disabled={image === null}\n              onClick={() => {\n                if (image) {\n                  const buffers = generateDiffuseIrradianceMap(\n                    image,\n                    diffuseSampleSize,\n                    Number.parseFloat(blurSigma)\n                  );\n                  setItems(\n                    buffers.reduce(\n                      (m, buffer, idx) =>\n                        m.set(`Environment_c0${idx}.png.hdr`, buffer),\n                      new Map()\n                    )\n                  );\n                }\n              }}\n            >\n              generate\n            </Button>\n          </Stack>\n        </Item>\n        <Item>\n          <Stack spacing={2} alignItems=\"center\">\n            <Typography variant=\"h6\">Pre-Filtered Environment Map</Typography>\n\n            <Item>\n              <Typography>sampling pattern</Typography>\n\n              <PointsViewer\n                buffer={() => wasm.the_step_2(1, 1, 1, roughness, 60)}\n                itemSize={3}\n                uniqueId=\"thestep2\"\n              />\n            </Item>\n            <Stack direction=\"row\" spacing={2}>\n              <TextField\n                style={{ width: 90 }}\n                label=\"sample size\"\n                type=\"number\"\n                value={specularSampleSize}\n                onChange={(e) =>\n                  setSpecularSampleSize(Number.parseInt(e.target.value))\n                }\n              />\n              <TextField\n                style={{ width: 90 }}\n                label=\"map size\"\n                type=\"number\"\n                value={specularMapSize}\n                onChange={(e) =>\n                  setSpecularMapSize(Number.parseInt(e.target.value))\n                }\n              />\n              <TextField\n                style={{ width: 90 }}\n                label=\"mip-levels\"\n                type=\"number\"\n                value={specularMipLevels}\n                onChange={(e) =>\n                  setSpecularMipLevels(Number.parseInt(e.target.value))\n                }\n              />\n            </Stack>\n            <Button\n              disabled={image === null}\n              onClick={() => {\n                if (image)\n                  generatePreFilteredSpecularMap(\n                    image,\n                    specularSampleSize,\n                    specularMapSize,\n                    specularMipLevels\n                  ).then((buffers) => {\n                    setItems(\n                      buffers.reduce(\n                        (m, buffer, idx) =>\n                          m.set(\n                            `Environment_m0${Math.floor(idx / 6)}_c0${\n                              idx % 6\n                            }.png.hdr`,\n                            buffer\n                          ),\n                        new Map()\n                      )\n                    );\n                  });\n              }}\n            >\n              generate\n            </Button>\n          </Stack>\n        </Item>\n      </Stack>\n      {/*<VisualDebug />*/}\n      <Stack spacing={2} direction=\"row\">\n        <Button\n          onClick={() => {\n            let z: any = {};\n            items.forEach((buffer, name) => {\n              z[name] = buffer;\n            });\n            const zipped = fflate.zipSync(z);\n            downloadBlob(zipped, \"environment-maps.zip\");\n          }}\n        >\n          Download All\n        </Button>\n        <Button\n          disabled={image === null}\n          onClick={() => {\n            if (image) downloadBlurredHDR(image, Number.parseFloat(blurSigma));\n          }}\n        >\n          Download Blurred\n        </Button>\n        <Button onClick={webGpuTest}>WebGPU test</Button>\n      </Stack>\n\n      <StatusTable names={Array.from(items.keys())} />\n      <Container>\n        <PMREMDebug />\n      </Container>\n      {/*<Container>*/}\n      {/*  <CreatePlanesDebug />*/}\n      {/*</Container>*/}\n      <Container>\n        <ThreeDebug eff={pmremCubemap} />\n      </Container>\n      {/*<Container>*/}\n      {/*  <OutlierDebug />*/}\n      {/*</Container>*/}\n    </Stack>\n  );\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport styled from '@mui/styled-engine';\nimport styleFunctionSx, { extendSxProp } from './styleFunctionSx';\nimport useTheme from './useTheme';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function createBox() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaultTheme = options.defaultTheme,\n      _options$defaultClass = options.defaultClassName,\n      defaultClassName = _options$defaultClass === void 0 ? 'MuiBox-root' : _options$defaultClass,\n      generateClassName = options.generateClassName;\n  var BoxRoot = styled('div')(styleFunctionSx);\n  var Box = /*#__PURE__*/React.forwardRef(function Box(inProps, ref) {\n    var theme = useTheme(defaultTheme);\n\n    var _extendSxProp = extendSxProp(inProps),\n        className = _extendSxProp.className,\n        _extendSxProp$compone = _extendSxProp.component,\n        component = _extendSxProp$compone === void 0 ? 'div' : _extendSxProp$compone,\n        other = _objectWithoutPropertiesLoose(_extendSxProp, _excluded);\n\n    return /*#__PURE__*/_jsx(BoxRoot, _extends({\n      as: component,\n      ref: ref,\n      className: clsx(className, generateClassName ? generateClassName(defaultClassName) : defaultClassName),\n      theme: theme\n    }, other));\n  });\n  process.env.NODE_ENV !== \"production\" ? void 0 : void 0;\n  return Box;\n}","import { createBox } from '@mui/system';\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '../utils';\nimport { createTheme } from '../styles';\nvar defaultTheme = createTheme();\n/**\n * @ignore - do not document.\n */\n\nvar Box = createBox({\n  defaultTheme: defaultTheme,\n  defaultClassName: 'MuiBox-root',\n  generateClassName: ClassNameGenerator.generate\n});\nexport default Box;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getLinkUtilityClass(slot) {\n  return generateUtilityClass('MuiLink', slot);\n}\nvar linkClasses = generateUtilityClasses('MuiLink', ['root', 'underlineNone', 'underlineHover', 'underlineAlways', 'button', 'focusVisible']);\nexport default linkClasses;","import _slicedToArray from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"color\", \"component\", \"onBlur\", \"onFocus\", \"TypographyClasses\", \"underline\", \"variant\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { elementTypeAcceptingRef } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha, getPath } from '@mui/system';\nimport capitalize from '../utils/capitalize';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport useIsFocusVisible from '../utils/useIsFocusVisible';\nimport useForkRef from '../utils/useForkRef';\nimport Typography from '../Typography';\nimport linkClasses, { getLinkUtilityClass } from './linkClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar colorTransformations = {\n  primary: 'primary.main',\n  textPrimary: 'text.primary',\n  secondary: 'secondary.main',\n  textSecondary: 'text.secondary',\n  error: 'error.main'\n};\n\nvar transformDeprecatedColors = function transformDeprecatedColors(color) {\n  return colorTransformations[color] || color;\n};\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      component = ownerState.component,\n      focusVisible = ownerState.focusVisible,\n      underline = ownerState.underline;\n  var slots = {\n    root: ['root', \"underline\".concat(capitalize(underline)), component === 'button' && 'button', focusVisible && 'focusVisible']\n  };\n  return composeClasses(slots, getLinkUtilityClass, classes);\n};\n\nvar LinkRoot = styled(Typography, {\n  name: 'MuiLink',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, styles[\"underline\".concat(capitalize(ownerState.underline))], ownerState.component === 'button' && styles.button];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  var color = getPath(theme, \"palette.\".concat(transformDeprecatedColors(ownerState.color))) || ownerState.color;\n  return _extends({}, ownerState.underline === 'none' && {\n    textDecoration: 'none'\n  }, ownerState.underline === 'hover' && {\n    textDecoration: 'none',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  }, ownerState.underline === 'always' && {\n    textDecoration: 'underline',\n    textDecorationColor: color !== 'inherit' ? alpha(color, 0.4) : undefined,\n    '&:hover': {\n      textDecorationColor: 'inherit'\n    }\n  }, ownerState.component === 'button' && _defineProperty({\n    position: 'relative',\n    WebkitTapHighlightColor: 'transparent',\n    backgroundColor: 'transparent',\n    // Reset default value\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n    border: 0,\n    margin: 0,\n    // Remove the margin in Safari\n    borderRadius: 0,\n    padding: 0,\n    // Remove the padding in Firefox\n    cursor: 'pointer',\n    userSelect: 'none',\n    verticalAlign: 'middle',\n    MozAppearance: 'none',\n    // Reset\n    WebkitAppearance: 'none',\n    // Reset\n    '&::-moz-focus-inner': {\n      borderStyle: 'none' // Remove Firefox dotted outline.\n\n    }\n  }, \"&.\".concat(linkClasses.focusVisible), {\n    outline: 'auto'\n  }));\n});\nvar Link = /*#__PURE__*/React.forwardRef(function Link(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiLink'\n  });\n\n  var className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'a' : _props$component,\n      onBlur = props.onBlur,\n      onFocus = props.onFocus,\n      TypographyClasses = props.TypographyClasses,\n      _props$underline = props.underline,\n      underline = _props$underline === void 0 ? 'always' : _props$underline,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'inherit' : _props$variant,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var _useIsFocusVisible = useIsFocusVisible(),\n      isFocusVisibleRef = _useIsFocusVisible.isFocusVisibleRef,\n      handleBlurVisible = _useIsFocusVisible.onBlur,\n      handleFocusVisible = _useIsFocusVisible.onFocus,\n      focusVisibleRef = _useIsFocusVisible.ref;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      focusVisible = _React$useState2[0],\n      setFocusVisible = _React$useState2[1];\n\n  var handlerRef = useForkRef(ref, focusVisibleRef);\n\n  var handleBlur = function handleBlur(event) {\n    handleBlurVisible(event);\n\n    if (isFocusVisibleRef.current === false) {\n      setFocusVisible(false);\n    }\n\n    if (onBlur) {\n      onBlur(event);\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    handleFocusVisible(event);\n\n    if (isFocusVisibleRef.current === true) {\n      setFocusVisible(true);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  var ownerState = _extends({}, props, {\n    color: color,\n    component: component,\n    focusVisible: focusVisible,\n    underline: underline,\n    variant: variant\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(LinkRoot, _extends({\n    className: clsx(classes.root, className),\n    classes: TypographyClasses,\n    color: color,\n    component: component,\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    ref: handlerRef,\n    ownerState: ownerState,\n    variant: variant\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Link;","import * as React from \"react\";\nimport { Box, Link, Typography } from \"@mui/material\";\nexport default function Header() {\n  return (\n    <Box textAlign=\"center\">\n      <Typography variant=\"h3\" component=\"div\" gutterBottom>\n        Diffuse Irradiance & Pre-Filtered Environment Map Generator\n      </Typography>\n      <Typography variant=\"subtitle1\" gutterBottom component=\"div\">\n        This is a demo of Rust-WASM implementation of{\" \"}\n        <Link href=\"https://learnopengl.com/PBR/IBL/Diffuse-irradiance\">\n          Diffuse Irradiance Map\n        </Link>\n        &nbsp;and&nbsp;\n        <Link href=\"https://learnopengl.com/PBR/IBL/Specular-IBL\">\n          Pre-Filtered Environment Map\n        </Link>\n        &nbsp;generation algorithms.\n      </Typography>\n    </Box>\n  );\n}\n","import * as React from \"react\";\nimport { useEffect } from \"react\";\nimport { pmrem } from \"../pmrem\";\nexport default function PMREMDebug() {\n  const domID = \"pmremdebug\";\n  const width = 512;\n  const height = 512;\n  useEffect(() => {\n    pmrem(width, height, domID);\n  }, []);\n  return (\n    <div\n      id={domID}\n      style={{\n        height: height.toString() + \"px\",\n        width: width.toString() + \"px\",\n      }}\n    />\n  );\n}\n","import * as THREE from \"three\";\nimport {\n  ACESFilmicToneMapping,\n  Color,\n  Mesh,\n  MeshStandardMaterial,\n  PerspectiveCamera,\n  PMREMGenerator,\n  Scene,\n  TorusKnotGeometry,\n  WebGLRenderer,\n} from \"three\";\n// import { DebugEnvironment } from \"three/examples/jsm/environments/DebugEnvironment\";\n// import { HDRCubeTextureLoader } from \"three/examples/jsm/loaders/HDRCubeTextureLoader\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\n\nexport function pmrem(width: number, height: number, domID: string) {\n  const camera = new PerspectiveCamera(40, width / height, 1, 1000);\n  camera.position.set(0, 0, 120);\n  const scene = new Scene();\n  scene.background = new Color(0x000000);\n\n  const renderer = new WebGLRenderer();\n  document.getElementById(domID).appendChild(renderer.domElement);\n\n  renderer.physicallyCorrectLights = true;\n  renderer.toneMapping = ACESFilmicToneMapping;\n\n  let geometry = new TorusKnotGeometry(18, 8, 150, 20);\n  // let geometry = new THREE.SphereGeometry( 26, 64, 32 );\n  let material = new MeshStandardMaterial({\n    color: 0xffffff,\n    metalness: 0.68,\n    roughness: 0.08,\n  });\n\n  const torusMesh = new Mesh(geometry, material);\n  scene.add(torusMesh);\n\n  const geometry2 = new THREE.PlaneGeometry(200, 200);\n  const material2 = new THREE.MeshBasicMaterial();\n\n  const planeMesh = new THREE.Mesh(geometry2, material2);\n  planeMesh.position.y = -50;\n  planeMesh.rotation.x = -Math.PI * 0.5;\n  scene.add(planeMesh);\n\n  // new TextureLoader().load(\"uv_grid_opengl.jpg\", (map) => {\n  //   const xx = _createPlanes(7);\n  //   console.log(xx);\n  //   const { lodPlanes } = xx;\n  //   let cnt = 0;\n  //   lodPlanes.forEach((lodPlane) => {\n  //     const m = new Mesh(lodPlane, new MeshBasicMaterial({ map }));\n  //     m.translateZ(cnt++);\n  //     m.translateX(500);\n  //     m.translateY(100);\n  //     scene.add(m);\n  //   });\n  // });\n\n  const pmremGenerator = new PMREMGenerator(renderer);\n  pmremGenerator.compileCubemapShader();\n\n  // const envScene = new DebugEnvironment();\n  // const generatedCubeRenderTarget = pmremGenerator.fromScene(envScene);\n\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(width, height);\n\n  const render = () => {\n    renderer.render(scene, camera);\n  };\n  new RGBELoader().load(\"venetian_crossroads_1k.hdr\", (dataTexture) => {\n    // hdrCubeMap.magFilter = THREE.LinearFilter;\n    // hdrCubeMap.needsUpdate = true;\n\n    const renderTarget = pmremGenerator.fromEquirectangular(dataTexture);\n    // const cubeMap = hdrCubeMap;\n\n    const newEnvMap = renderTarget ? renderTarget.texture : null;\n\n    if (newEnvMap && newEnvMap !== torusMesh.material.envMap) {\n      torusMesh.material.envMap = newEnvMap;\n      torusMesh.material.needsUpdate = true;\n\n      planeMesh.material.map = newEnvMap;\n      planeMesh.material.needsUpdate = true;\n    }\n\n    torusMesh.rotation.y += 0.005;\n    planeMesh.visible = true;\n\n    // scene.background = cubeMap;\n    renderer.toneMappingExposure = 1;\n    render();\n  });\n\n  //renderer.toneMapping = ReinhardToneMapping;\n  renderer.outputEncoding = THREE.sRGBEncoding;\n  const controls = new OrbitControls(camera, renderer.domElement);\n  controls.minDistance = 50;\n  controls.maxDistance = 300;\n  controls.addEventListener(\"change\", render);\n}\n","import * as React from \"react\";\nimport { useEffect } from \"react\";\nexport default function ThreeDebug(props: {\n  domID?: string;\n  eff: (w: number, h: number, domID: string) => any;\n  width?: number;\n  height?: number;\n}) {\n  const domID =\n    props.domID ?? \"dom\" + Math.floor(Math.random() * 100000).toString();\n  const width = props.width ?? 512;\n  const height = props.height ?? 512;\n  useEffect(() => {\n    props.eff(width, height, domID);\n  }, []);\n  return (\n    <div\n      id={domID}\n      style={{\n        height: height.toString() + \"px\",\n        width: width.toString() + \"px\",\n      }}\n    />\n  );\n}\n","import _classCallCheck from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/runner/work/irradiance-wasm/irradiance-wasm/www/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { BoxGeometry, CubeCamera, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, DataTexture, DoubleSide, HalfFloatType, LinearEncoding, LinearFilter, LinearMipmapLinearFilter, Mesh, NoBlending, RGBAFormat, Scene, ShaderMaterial, Vector3, WebGLCubeRenderTarget } from \"three\"; // The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\n\nvar MAX_SAMPLES = 20;\nvar _oldTarget = null; // Golden Ratio\n\nvar PHI = (1 + Math.sqrt(5)) / 2;\nvar INV_PHI = 1 / PHI; // Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\n\nvar _axisDirections = [/*@__PURE__*/new Vector3(1, 1, 1), /*@__PURE__*/new Vector3(-1, 1, 1), /*@__PURE__*/new Vector3(1, 1, -1), /*@__PURE__*/new Vector3(-1, 1, -1), /*@__PURE__*/new Vector3(0, PHI, INV_PHI), /*@__PURE__*/new Vector3(0, PHI, -INV_PHI), /*@__PURE__*/new Vector3(INV_PHI, 0, PHI), /*@__PURE__*/new Vector3(-INV_PHI, 0, PHI), /*@__PURE__*/new Vector3(PHI, INV_PHI, 0), /*@__PURE__*/new Vector3(-PHI, INV_PHI, 0)];\nvar _renderTargetParams = {\n  magFilter: LinearFilter,\n  // minFilter: LinearFilter,\n  // minFilter: LinearMipmapLinearFilter,\n  generateMipmaps: false,\n  type: HalfFloatType,\n  format: RGBAFormat,\n  encoding: LinearEncoding,\n  depthBuffer: false\n};\nexport var PMREMCubeMapGenerator = /*#__PURE__*/function () {\n  function PMREMCubeMapGenerator(renderer) {\n    _classCallCheck(this, PMREMCubeMapGenerator);\n\n    this._renderer = renderer;\n    this._pingPongRenderTarget = null;\n    this._lodMax = 0;\n    this._cubeSize = 0;\n    this._sizeLods = [];\n    this._sigmas = [];\n    this._blurMaterial = null;\n  }\n  /**\n   * Generates a PMREM from an equirectangular texture, which can be either LDR\n   * or HDR. The ideal input image size is 1k (1024 x 512),\n   * as this matches best with the 256 x 256 cubemap output.\n   */\n\n\n  _createClass(PMREMCubeMapGenerator, [{\n    key: \"fromEquirectangular\",\n    value: function fromEquirectangular(equirectangular) {\n      var renderTarget = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      return this._fromTexture(equirectangular, renderTarget);\n    }\n    /**\n     * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n     * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n     * one of them will cause any others to also become unusable.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this._dispose();\n    } // private interface\n\n  }, {\n    key: \"_setSize\",\n    value: function _setSize(cubeSize) {\n      this._lodMax = Math.floor(Math.log2(cubeSize));\n      this._cubeSize = Math.pow(2, this._lodMax);\n    }\n  }, {\n    key: \"_dispose\",\n    value: function _dispose() {\n      var _this$_blurMaterial;\n\n      (_this$_blurMaterial = this._blurMaterial) === null || _this$_blurMaterial === void 0 ? void 0 : _this$_blurMaterial.dispose();\n      if (this._pingPongRenderTarget !== null) this._pingPongRenderTarget.dispose();\n    }\n  }, {\n    key: \"_cleanup\",\n    value: function _cleanup(outputTarget) {\n      this._renderer.setRenderTarget(_oldTarget);\n\n      outputTarget.scissorTest = false;\n    }\n  }, {\n    key: \"_fromTexture\",\n    value: function _fromTexture(texture, renderTarget) {\n      if (texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping) {\n        this._setSize(texture.image.length === 0 ? 16 : texture.image[0].width || texture.image[0].image.width);\n      } else {\n        // Equirectangular\n        this._setSize(texture.image.width / 4);\n      }\n\n      _oldTarget = this._renderer.getRenderTarget();\n\n      var cubeUVRenderTarget = renderTarget || this._allocateTargets();\n\n      this._textureToCubeUV(texture, cubeUVRenderTarget);\n\n      var dataCubeTexture = this._applyPMREM(cubeUVRenderTarget);\n\n      this._cleanup(cubeUVRenderTarget);\n\n      return dataCubeTexture;\n    }\n  }, {\n    key: \"_allocateTargets\",\n    value: function _allocateTargets() {\n      var size = this._cubeSize;\n\n      var cubeUVRenderTarget = _createRenderTarget(size, _renderTargetParams);\n\n      if (this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== size) {\n        if (this._pingPongRenderTarget !== null) {\n          this._dispose();\n        }\n\n        this._pingPongRenderTarget = _createRenderTarget(size, _renderTargetParams);\n        var _lodMax = this._lodMax; // TODO remove log\n\n        var _createPlanes2 = _createPlanes(_lodMax);\n\n        this._sizeLods = _createPlanes2.sizeLods;\n        this._sigmas = _createPlanes2.sigmas;\n        this._blurMaterial = _getBlurShader();\n      }\n\n      return cubeUVRenderTarget;\n    }\n  }, {\n    key: \"_textureToCubeUV\",\n    value: function _textureToCubeUV(texture, cubeUVRenderTarget) {\n      var renderer = this._renderer;\n      var isCubeTexture = texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping;\n\n      if (isCubeTexture) {\n        // TODO just copy cube texture if possible\n        throw new Error(\"from cube texture is not implemented.\");\n      } else {\n        cubeUVRenderTarget.fromEquirectangularTexture(renderer, texture);\n      }\n    }\n  }, {\n    key: \"_applyPMREM\",\n    value: function _applyPMREM(cubeUVRenderTarget) {\n      var renderer = this._renderer;\n      var autoClear = renderer.autoClear;\n      renderer.autoClear = false;\n      var mipmaps = [];\n      var previous = cubeUVRenderTarget.texture;\n\n      for (var i = 1; i < this._sigmas.length; i++) {\n        var sigma = Math.sqrt(this._sigmas[i] * this._sigmas[i] - this._sigmas[i - 1] * this._sigmas[i - 1]);\n        var poleAxis = _axisDirections[(i - 1) % _axisDirections.length]; // const size = 0;\n\n        var size = this._sizeLods[i];\n        var rt = new WebGLCubeRenderTarget(size, _renderTargetParams);\n\n        this._blur(previous, rt, i - 1, i, sigma, poleAxis);\n\n        var dct = makeDataCubeTexture(renderer, size, rt);\n        rt.dispose();\n        mipmaps.push(dct);\n        previous = dct;\n      }\n\n      var dataCubeTexture = makeDataCubeTexture(renderer, this._cubeSize, cubeUVRenderTarget);\n      dataCubeTexture.minFilter = LinearMipmapLinearFilter;\n      dataCubeTexture.mipmaps = mipmaps;\n      dataCubeTexture.needsUpdate = true;\n      renderer.autoClear = autoClear;\n      return dataCubeTexture;\n    }\n    /**\n     * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n     * vertically and horizontally, but this breaks down on a cube. Here we apply\n     * the blur latitudinally (around the poles), and then longitudinally (towards\n     * the poles) to approximate the orthogonally-separable blur. It is least\n     * accurate at the poles, but still does a decent job.\n     */\n\n  }, {\n    key: \"_blur\",\n    value: function _blur(previous, current, lodIn, lodOut, sigma, poleAxis) {\n      var pingPongRenderTarget = this._pingPongRenderTarget;\n\n      this._halfBlur(previous, // TODO: hull exception\n      pingPongRenderTarget, lodIn, lodOut, sigma, \"latitudinal\", poleAxis);\n\n      this._halfBlur( // TODO: hull exception\n      pingPongRenderTarget.texture, current, lodOut, lodOut, sigma, \"longitudinal\", poleAxis);\n    }\n  }, {\n    key: \"_halfBlur\",\n    value: function _halfBlur(targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis) {\n      var renderer = this._renderer; // TODO: null exception\n\n      var blurMaterial = this._blurMaterial;\n\n      if (direction !== \"latitudinal\" && direction !== \"longitudinal\") {\n        console.error(\"blur direction must be either latitudinal or longitudinal!\");\n      } // Number of standard deviations at which to cut off the discrete approximation.\n\n\n      var STANDARD_DEVIATIONS = 3;\n      var blurMesh = new Mesh(new BoxGeometry(), blurMaterial);\n      var blurUniforms = blurMaterial.uniforms;\n      var pixels = this._sizeLods[lodIn] - 1;\n      var radiansPerPixel = isFinite(sigmaRadians) ? Math.PI / (2 * pixels) : 2 * Math.PI / (2 * MAX_SAMPLES - 1);\n      var sigmaPixels = sigmaRadians / radiansPerPixel;\n      var samples = isFinite(sigmaRadians) ? 1 + Math.floor(STANDARD_DEVIATIONS * sigmaPixels) : MAX_SAMPLES;\n\n      if (samples > MAX_SAMPLES) {\n        console.warn(\"sigmaRadians, \".concat(sigmaRadians, \", is too large and will clip, as it requested \").concat(samples, \" samples when the maximum is set to \").concat(MAX_SAMPLES));\n      }\n\n      var weights = [];\n      var sum = 0;\n\n      for (var i = 0; i < MAX_SAMPLES; ++i) {\n        var x = i / sigmaPixels;\n        var weight = Math.exp(-x * x / 2);\n        weights.push(weight);\n\n        if (i === 0) {\n          sum += weight;\n        } else if (i < samples) {\n          sum += 2 * weight;\n        }\n      }\n\n      for (var _i = 0; _i < weights.length; _i++) {\n        weights[_i] = weights[_i] / sum;\n      }\n\n      blurUniforms[\"envMap\"].value = targetIn;\n      blurUniforms[\"samples\"].value = samples;\n      blurUniforms[\"weights\"].value = weights;\n      blurUniforms[\"latitudinal\"].value = direction === \"latitudinal\";\n\n      if (poleAxis) {\n        blurUniforms[\"poleAxis\"].value = poleAxis;\n      }\n\n      blurUniforms[\"dTheta\"].value = radiansPerPixel; // blurUniforms[\"mipInt\"].value = _lodMax - lodIn;\n\n      blurUniforms[\"mipInt\"].value = lodIn;\n      var camera = new CubeCamera(0.1, 1000, targetOut);\n      var scene = new Scene();\n      scene.add(blurMesh);\n      camera.update(renderer, scene);\n    }\n  }]);\n\n  return PMREMCubeMapGenerator;\n}();\nexport function _createPlanes(lodMax) {\n  var sizeLods = [];\n  var sigmas = [];\n  var lod = lodMax;\n\n  for (var i = 0; i < lodMax; i++) {\n    var sizeLod = Math.pow(2, lod);\n    sizeLods.push(sizeLod);\n    var sigma = 1.0 / sizeLod;\n\n    if (i === 0) {\n      sigma = 0;\n    }\n\n    sigmas.push(sigma);\n    lod--;\n  }\n\n  return {\n    sizeLods: sizeLods,\n    sigmas: sigmas\n  };\n}\n\nfunction _createRenderTarget(size, params) {\n  return new WebGLCubeRenderTarget(size, params);\n}\n\nfunction _getBlurShader() {\n  var weights = new Float32Array(MAX_SAMPLES);\n  var poleAxis = new Vector3(0, 1, 0);\n  return new ShaderMaterial({\n    name: \"SphericalGaussianBlur\",\n    defines: {\n      n: MAX_SAMPLES\n    },\n    uniforms: {\n      envMap: {\n        value: null\n      },\n      samples: {\n        value: 1\n      },\n      weights: {\n        value: weights\n      },\n      latitudinal: {\n        value: false\n      },\n      dTheta: {\n        value: 0\n      },\n      mipInt: {\n        value: 0\n      },\n      poleAxis: {\n        value: poleAxis\n      }\n    },\n    vertexShader:\n    /* glsl */\n    \"\\n            varying vec3 vOutputDirection;\\n\\n            void main() {\\n            \\tvOutputDirection = position;\\n\\t\\t\\t\\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );\\n\\t\\t\\t}\\n    \",\n    fragmentShader:\n    /* glsl */\n    \"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform samplerCube envMap;\\n\\t\\t\\tuniform int samples;\\n\\t\\t\\tuniform float weights[ n ];\\n\\t\\t\\tuniform bool latitudinal;\\n\\t\\t\\tuniform float dTheta;\\n\\t\\t\\tuniform float mipInt;\\n\\t\\t\\tuniform vec3 poleAxis;\\n\\n\\t\\t\\tvec3 getSample( float theta, vec3 axis ) {\\n\\n\\t\\t\\t\\tfloat cosTheta = cos( theta );\\n\\t\\t\\t\\t// Rodrigues' axis-angle rotation\\n\\t\\t\\t\\tvec3 sampleDirection = vOutputDirection * cosTheta\\n\\t\\t\\t\\t\\t+ cross( axis, vOutputDirection ) * sin( theta )\\n\\t\\t\\t\\t\\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\\n                return textureCubeLodEXT(envMap, normalize(sampleDirection), mipInt).rgb;\\n\\t\\t\\t\\t// return bilinearCubeUV( envMap, sampleDirection, mipInt );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\\n\\n\\t\\t\\t\\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\\n\\n\\t\\t\\t\\t\\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\taxis = normalize( axis );\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t\\t\\t\\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\\n\\n\\t\\t\\t\\tfor ( int i = 1; i < n; i++ ) {\\n\\n\\t\\t\\t\\t\\tif ( i >= samples ) {\\n\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tfloat theta = dTheta * float( i );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\t\\t\",\n    blending: NoBlending,\n    depthTest: false,\n    depthWrite: false,\n    side: DoubleSide\n  });\n}\n\nexport function makeDataCubeTexture(renderer, size, rt) {\n  var format = _renderTargetParams.format,\n      type = _renderTargetParams.type,\n      magFilter = _renderTargetParams.magFilter,\n      minFilter = _renderTargetParams.minFilter,\n      encoding = _renderTargetParams.encoding;\n  var cubeImages = [0, 1, 2, 3, 4, 5].map(function (face) {\n    var buf = new Uint16Array(size * size * 4);\n    renderer.readRenderTargetPixels(rt, 0, 0, size, size, buf, face); // return buf;\n    // console.log(buf);\n\n    var dt = new DataTexture(buf, size, size, format, type, undefined, undefined, undefined, magFilter, undefined, undefined, encoding);\n    dt.generateMipmaps = false;\n    return dt;\n  });\n  var ct = new CubeTexture(cubeImages, undefined, undefined, undefined, magFilter, minFilter, format, type, undefined, encoding);\n  ct.needsUpdate = true;\n  ct.generateMipmaps = false;\n  return ct;\n}","import * as THREE from \"three\";\nimport {\n  ACESFilmicToneMapping,\n  BoxGeometry,\n  Color,\n  Mesh,\n  PerspectiveCamera,\n  Scene,\n  ShaderMaterial,\n  WebGLRenderer,\n} from \"three\";\n// import { DebugEnvironment } from \"three/examples/jsm/environments/DebugEnvironment\";\n// import { HDRCubeTextureLoader } from \"three/examples/jsm/loaders/HDRCubeTextureLoader\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\nimport { PMREMCubeMapGenerator } from \"pmrem-cubemap-generator\";\n\nexport function pmremCubemap(width: number, height: number, domID: string) {\n  const camera = new PerspectiveCamera(40, width / height, 1, 1000);\n  camera.position.set(0, 0, 8);\n  const scene = new Scene();\n  scene.background = new Color(0xf00000);\n\n  const renderer = new WebGLRenderer();\n  document.getElementById(domID).appendChild(renderer.domElement);\n\n  renderer.physicallyCorrectLights = true;\n  renderer.toneMapping = ACESFilmicToneMapping;\n\n  const pmremGenerator = new PMREMCubeMapGenerator(renderer);\n\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(width, height);\n\n  const render = () => {\n    requestAnimationFrame(() => renderer.render(scene, camera));\n  };\n  new RGBELoader().load(\"venetian_crossroads_1k.hdr\", (dataTexture) => {\n    // hdrCubeMap.magFilter = THREE.LinearFilter;\n    // hdrCubeMap.needsUpdate = true;\n\n    const dataCubeTexture = pmremGenerator.fromEquirectangular(dataTexture);\n    // const cubeMap = hdrCubeMap;\n    const newEnvMap = dataCubeTexture ?? null;\n\n    // console.log(renderTarget.texture.mipmaps);\n    const mat = new ShaderMaterial({\n      vertexShader: `\n                  varying vec3 vOutputDirection;\n\n      void main() {\n                  \tvOutputDirection = position;\n\n      gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );\n      }\n      `,\n      fragmentShader: `\n      \tvarying vec3 vOutputDirection;\n      \tuniform samplerCube env;\n        void main() {\n          gl_FragColor = textureCubeLodEXT(env, normalize(vOutputDirection), 4.0);\n          // gl_FragColor = textureCube(env, normalize(vOutputDirection));\n        }\n      `,\n      uniforms: {\n        env: { value: newEnvMap },\n      },\n    });\n\n    const mipmaptest = new Mesh(new BoxGeometry(), mat);\n    mipmaptest.translateX(-1);\n\n    scene.add(mipmaptest);\n\n    // const mat2 = new ShaderMaterial({\n    //   vertexShader: `\n    //               varying vec3 vOutputDirection;\n    //\n    //   void main() {\n    //               \tvOutputDirection = position;\n    //\n    //   gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );\n    //   }\n    //   `,\n    //   fragmentShader: `\n    //   \tvarying vec3 vOutputDirection;\n    //   \tuniform samplerCube env;\n    //     void main() {\n    //       gl_FragColor = textureCube(env, normalize(vOutputDirection));\n    //     }\n    //   `,\n    //   uniforms: {\n    //     env: { value: newEnvMap.mipmaps[1] },\n    //   },\n    // });\n    // const subMipmapTest = new Mesh(new BoxGeometry(), mat2);\n    // subMipmapTest.translateX(1);\n    // scene.add(subMipmapTest);\n    // scene.background = cubeMap;\n    renderer.toneMappingExposure = 1;\n    render();\n  });\n\n  //renderer.toneMapping = ReinhardToneMapping;\n  renderer.outputEncoding = THREE.sRGBEncoding;\n  const controls = new OrbitControls(camera, renderer.domElement);\n  controls.minDistance = 1;\n  controls.maxDistance = 300;\n  controls.addEventListener(\"change\", render);\n}\n"],"names":["getContainerUtilityClass","slot","generateUtilityClass","_excluded","ContainerRoot","styled","name","overridesResolver","props","styles","ownerState","root","concat","capitalize","String","maxWidth","fixed","disableGutters","_ref","theme","width","marginLeft","boxSizing","marginRight","display","paddingLeft","spacing","paddingRight","breakpoints","up","_ref3","Object","keys","values","reduce","acc","breakpoint","value","unit","_ref4","Math","max","xs","inProps","ref","useThemeProps","className","_props$component","component","_props$disableGutters","_props$fixed","_props$maxWidth","other","classes","slots","composeClasses","useUtilityClasses","as","getTypographyUtilityClass","TypographyRoot","variant","align","noWrap","gutterBottom","paragraph","margin","typography","textAlign","overflow","textOverflow","whiteSpace","marginBottom","defaultVariantMapping","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","colorTransformations","primary","textPrimary","secondary","textSecondary","error","themeProps","color","transformDeprecatedColors","extendSxProp","_props$align","_props$gutterBottom","_props$noWrap","_props$paragraph","_props$variant","_props$variantMapping","variantMapping","Component","u8","Uint8Array","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","start","b","i","r","j","_a","fl","revfl","_b","revfd","rev","x","hMap","cd","mb","s","length","l","co","le","rvb","sv","r_1","v","m","flt","fdt","flm","fdm","shft","p","slc","e","n","BYTES_PER_ELEMENT","set","subarray","ec","err","ind","msg","nt","Error","code","captureStackTrace","wbits","d","o","wbits16","hTree","t","push","f","t2","slice","et","sort","a","i0","i1","i2","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","lc","c","cl","cli","cln","cls","w","clen","cf","wfblk","out","pos","dat","wblk","final","syms","lf","df","li","bs","bl","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","lm","ll","dm","dl","flen","ftlen","dtlen","llm","lcts","it","clct","len","dst","deo","dflt","lvl","plvl","pre","post","lst","ceil","opt","msk_1","prev","head","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","min","maxd","ml","nl","mmd","md","ti","lin","din","crct","Int32Array","k","crc","cr","dopt","st","level","mem","log","mrg","wbytes","deflateSync","data","opts","fltn","val","op","Array","isArray","te","TextEncoder","td","TextDecoder","decode","stream","strToU8","str","latin1","ar_1","charCodeAt","encode","ar","ai","exfl","ex","wzh","fn","u","ce","extra","col","exl","os","flag","compression","Date","mtime","now","y","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","size","attrs","exf","wzf","zipSync","files","tot","file","com","comment","ms","oe","cdl","badd","queueMicrotask","setTimeout","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","RGBELoader","_DataTextureLoader","_super","manager","_this","type","key","buffer","rgbe_error","rgbe_error_code","console","fgets","lineLimit","consume","chunk","fromCharCode","indexOf","byteLength","RGBEByteToRGBHalf","sourceArray","sourceOffset","destArray","destOffset","scale","pow","byteArray","rgbe_header_info","line","match","gamma_re","exposure_re","format_re","dimensions_re","header","valid","string","comments","programtype","format","gamma","exposure","height","charAt","parseFloat","parseInt","RGBE_ReadHeader","h","image_rgba_data","scanline_width","data_rgba","offset","ptr_end","rgbeStart","scanline_buffer","num_scanlines","ptr","count","isEncodedRun","byteValue","_i","off","RGBE_ReadPixels_RLE","numElements","floatArray","Float32Array","halfArray","_j","url","onLoad","onProgress","onError","texture","texData","encoding","minFilter","magFilter","generateMipmaps","flipY","Item","Paper","padding","palette","text","Everything","useState","Map","items","setItems","diffuseSampleSize","setDiffuseSampleSize","specularSampleSize","setSpecularSampleSize","specularMapSize","setSpecularMapSize","specularMipLevels","setSpecularMipLevels","blurSigma","setBlurSigma","image","setImage","alignItems","onFile","direction","wasm","itemSize","uniqueId","style","id","label","onChange","Number","target","disabled","onClick","buffers","generateDiffuseIrradianceMap","idx","roughness","generatePreFilteredSpecularMap","then","floor","z","forEach","zipped","fflate","downloadBlob","downloadBlurredHDR","webGpuTest","names","from","eff","pmremCubemap","Box","options","undefined","defaultTheme","_options$defaultClass","defaultClassName","generateClassName","BoxRoot","styleFunctionSx","useTheme","_extendSxProp","_extendSxProp$compone","createBox","ClassNameGenerator","getLinkUtilityClass","LinkRoot","Typography","underline","button","textDecoration","textDecorationColor","position","WebkitTapHighlightColor","backgroundColor","outline","border","borderRadius","cursor","userSelect","verticalAlign","MozAppearance","WebkitAppearance","borderStyle","_props$color","onBlur","onFocus","TypographyClasses","_props$underline","_useIsFocusVisible","useIsFocusVisible","isFocusVisibleRef","handleBlurVisible","handleFocusVisible","focusVisibleRef","_React$useState","_React$useState2","focusVisible","setFocusVisible","handlerRef","useForkRef","event","current","Header","href","PMREMDebug","domID","useEffect","camera","PerspectiveCamera","scene","Scene","background","Color","renderer","WebGLRenderer","document","getElementById","appendChild","domElement","physicallyCorrectLights","toneMapping","ACESFilmicToneMapping","geometry","TorusKnotGeometry","material","MeshStandardMaterial","metalness","torusMesh","Mesh","add","geometry2","THREE","material2","planeMesh","rotation","PI","pmremGenerator","PMREMGenerator","compileCubemapShader","setPixelRatio","window","devicePixelRatio","setSize","render","load","dataTexture","renderTarget","fromEquirectangular","newEnvMap","envMap","needsUpdate","map","visible","toneMappingExposure","outputEncoding","controls","OrbitControls","minDistance","maxDistance","addEventListener","pmrem","toString","ThreeDebug","random","MAX_SAMPLES","_oldTarget","PHI","sqrt","INV_PHI","_axisDirections","_renderTargetParams","depthBuffer","PMREMCubeMapGenerator","_renderer","_pingPongRenderTarget","_lodMax","_cubeSize","_sizeLods","_sigmas","_blurMaterial","equirectangular","_fromTexture","_dispose","cubeSize","log2","_this$_blurMaterial","dispose","outputTarget","setRenderTarget","scissorTest","mapping","_setSize","getRenderTarget","cubeUVRenderTarget","_allocateTargets","_textureToCubeUV","dataCubeTexture","_applyPMREM","_cleanup","weights","poleAxis","_createRenderTarget","_createPlanes2","lodMax","sizeLods","sigmas","lod","sizeLod","sigma","_createPlanes","defines","uniforms","samples","latitudinal","dTheta","mipInt","vertexShader","fragmentShader","blending","depthTest","depthWrite","side","fromEquirectangularTexture","autoClear","mipmaps","previous","rt","_blur","dct","makeDataCubeTexture","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","blurMesh","blurUniforms","pixels","radiansPerPixel","isFinite","sigmaPixels","warn","sum","weight","exp","update","params","cubeImages","face","buf","readRenderTargetPixels","ct","requestAnimationFrame","mat","ShaderMaterial","env","mipmaptest","BoxGeometry","translateX"],"sourceRoot":""}